{"ast":null,"code":"import apiClient from './client';\nclass AuthService {\n  async login(credentials) {\n    const response = await apiClient.post('/auth/login', credentials);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      // Fetch the real user profile and store it\n      const profileResp = await apiClient.get('/users/profile');\n      localStorage.setItem('user', JSON.stringify(profileResp.data));\n    }\n    return response.data;\n  }\n  async register(userData) {\n    const response = await apiClient.post('/auth/register', userData);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      const profileResp = await apiClient.get('/users/profile');\n      localStorage.setItem('user', JSON.stringify(profileResp.data));\n    }\n    return response.data;\n  }\n  async logout() {\n    try {\n      await apiClient.post('/auth/logout');\n    } finally {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n    }\n  }\n  getCurrentUser() {\n    const userStr = localStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  }\n  getToken() {\n    return localStorage.getItem('token');\n  }\n  isAuthenticated() {\n    return !!this.getToken();\n  }\n}\nconst authService = new AuthService();\nexport default authService;","map":{"version":3,"names":["apiClient","AuthService","login","credentials","response","post","data","token","localStorage","setItem","profileResp","get","JSON","stringify","register","userData","logout","removeItem","getCurrentUser","userStr","getItem","parse","getToken","isAuthenticated","authService"],"sources":["C:/Users/Administrator/Desktop/bika/bika/frontend/src/services/api/authService.ts"],"sourcesContent":["import apiClient from './client';\r\nimport { LoginRequest, LoginResponse, User } from './types';\r\n\r\nclass AuthService {\r\n  async login(credentials: LoginRequest): Promise<LoginResponse> {\r\n    const response = await apiClient.post<LoginResponse>('/auth/login', credentials);\r\n    if (response.data.token) {\r\n      localStorage.setItem('token', response.data.token);\r\n      // Fetch the real user profile and store it\r\n      const profileResp = await apiClient.get<User>('/users/profile');\r\n      localStorage.setItem('user', JSON.stringify(profileResp.data));\r\n    }\r\n    return response.data;\r\n  }\r\n\r\n  async register(userData: {\r\n    email: string;\r\n    password: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    companyId: number;\r\n  }): Promise<LoginResponse> {\r\n    const response = await apiClient.post<LoginResponse>('/auth/register', userData);\r\n    if (response.data.token) {\r\n      localStorage.setItem('token', response.data.token);\r\n      const profileResp = await apiClient.get<User>('/users/profile');\r\n      localStorage.setItem('user', JSON.stringify(profileResp.data));\r\n    }\r\n    return response.data;\r\n  }\r\n\r\n  async logout(): Promise<void> {\r\n    try {\r\n      await apiClient.post('/auth/logout');\r\n    } finally {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n    }\r\n  }\r\n\r\n  getCurrentUser(): User | null {\r\n    const userStr = localStorage.getItem('user');\r\n    return userStr ? JSON.parse(userStr) : null;\r\n  }\r\n\r\n  getToken(): string | null {\r\n    return localStorage.getItem('token');\r\n  }\r\n\r\n  isAuthenticated(): boolean {\r\n    return !!this.getToken();\r\n  }\r\n}\r\n\r\nconst authService = new AuthService();\r\nexport default authService; "],"mappings":"AAAA,OAAOA,SAAS,MAAM,UAAU;AAGhC,MAAMC,WAAW,CAAC;EAChB,MAAMC,KAAKA,CAACC,WAAyB,EAA0B;IAC7D,MAAMC,QAAQ,GAAG,MAAMJ,SAAS,CAACK,IAAI,CAAgB,aAAa,EAAEF,WAAW,CAAC;IAChF,IAAIC,QAAQ,CAACE,IAAI,CAACC,KAAK,EAAE;MACvBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;MAClD;MACA,MAAMG,WAAW,GAAG,MAAMV,SAAS,CAACW,GAAG,CAAO,gBAAgB,CAAC;MAC/DH,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEG,IAAI,CAACC,SAAS,CAACH,WAAW,CAACJ,IAAI,CAAC,CAAC;IAChE;IACA,OAAOF,QAAQ,CAACE,IAAI;EACtB;EAEA,MAAMQ,QAAQA,CAACC,QAMd,EAA0B;IACzB,MAAMX,QAAQ,GAAG,MAAMJ,SAAS,CAACK,IAAI,CAAgB,gBAAgB,EAAEU,QAAQ,CAAC;IAChF,IAAIX,QAAQ,CAACE,IAAI,CAACC,KAAK,EAAE;MACvBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;MAClD,MAAMG,WAAW,GAAG,MAAMV,SAAS,CAACW,GAAG,CAAO,gBAAgB,CAAC;MAC/DH,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEG,IAAI,CAACC,SAAS,CAACH,WAAW,CAACJ,IAAI,CAAC,CAAC;IAChE;IACA,OAAOF,QAAQ,CAACE,IAAI;EACtB;EAEA,MAAMU,MAAMA,CAAA,EAAkB;IAC5B,IAAI;MACF,MAAMhB,SAAS,CAACK,IAAI,CAAC,cAAc,CAAC;IACtC,CAAC,SAAS;MACRG,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;MAChCT,YAAY,CAACS,UAAU,CAAC,MAAM,CAAC;IACjC;EACF;EAEAC,cAAcA,CAAA,EAAgB;IAC5B,MAAMC,OAAO,GAAGX,YAAY,CAACY,OAAO,CAAC,MAAM,CAAC;IAC5C,OAAOD,OAAO,GAAGP,IAAI,CAACS,KAAK,CAACF,OAAO,CAAC,GAAG,IAAI;EAC7C;EAEAG,QAAQA,CAAA,EAAkB;IACxB,OAAOd,YAAY,CAACY,OAAO,CAAC,OAAO,CAAC;EACtC;EAEAG,eAAeA,CAAA,EAAY;IACzB,OAAO,CAAC,CAAC,IAAI,CAACD,QAAQ,CAAC,CAAC;EAC1B;AACF;AAEA,MAAME,WAAW,GAAG,IAAIvB,WAAW,CAAC,CAAC;AACrC,eAAeuB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}