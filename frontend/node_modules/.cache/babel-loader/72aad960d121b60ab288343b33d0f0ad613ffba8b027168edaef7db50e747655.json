{"ast":null,"code":"import React,{useState}from\"react\";import{Box,Typography,Paper,Grid,Breadcrumbs,Link,TextField,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,List,ListItemButton,ListItemIcon,ListItemText,Button,Switch,FormControlLabel,MenuItem}from\"@mui/material\";import{Folder as FolderIcon,InsertDriveFile as FileIcon,Close as CloseIcon}from\"@mui/icons-material\";// Types\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";// Mock document types and fields\nconst documentTypes=[{id:\"invoice\",name:\"Invoice\",fields:[\"Invoice Number\",\"Date\",\"Amount\"]},{id:\"contract\",name:\"Contract\",fields:[\"Contract Name\",\"Start Date\",\"End Date\"]},{id:\"report\",name:\"Report\",fields:[\"Report Title\",\"Author\"]}];// Mock folder/document structure\nconst initialFolders=[{id:1,name:\"Documents\",folders:[{id:4,name:\"Subfolder A\",folders:[],documents:[{id:3,name:\"Contract 2024\",type:\"contract\",fields:{\"Contract Name\":\"Service Agreement\",\"Start Date\":\"2024-01-01\",\"End Date\":\"2024-12-31\"},attachment:\"contract2024.pdf\"}]}],documents:[{id:1,name:\"Invoice Jan\",type:\"invoice\",fields:{\"Invoice Number\":\"INV-001\",Date:\"2024-01-10\",Amount:\"1000\"},attachment:\"invoice_jan.pdf\"}]},{id:2,name:\"Images\",folders:[],documents:[]},{id:3,name:\"Projects\",folders:[],documents:[{id:2,name:\"Project Report\",type:\"report\",fields:{\"Report Title\":\"Q1 Progress\",Author:\"Alice\"},attachment:\"q1_report.pdf\"}]}];function findFolderByPath(folders,path){let current=folders;let folder=null;for(const name of path){folder=current.find(f=>f.name===name);if(!folder)return null;current=folder.folders;}return folder||{id:-1,name:\"Root\",folders:folders,documents:[]};}const RetrievalPage=()=>{const[folders]=useState(initialFolders);const[currentPath,setCurrentPath]=useState([]);const[search,setSearch]=useState(\"\");const[viewDoc,setViewDoc]=useState(null);const[advanced,setAdvanced]=useState(false);const[folderName,setFolderName]=useState(\"\");const[color,setColor]=useState(\"\");const[docType,setDocType]=useState(\"\");const[dateFrom,setDateFrom]=useState(\"\");const[dateTo,setDateTo]=useState(\"\");// Use a local type for currentFolder that allows fallback\nconst fallbackFolder={id:-1,name:\"Root\",folders,documents:[]};const currentFolder=currentPath.length===0?fallbackFolder:findFolderByPath(folders,currentPath)||fallbackFolder;// Folder navigation\nconst handleFolderClick=name=>{setCurrentPath([...currentPath,name]);};const handleBack=idx=>{if(typeof idx===\"number\")setCurrentPath(currentPath.slice(0,idx+1));else setCurrentPath([]);};// Document view\nconst handleViewDoc=doc=>setViewDoc(doc);const handleCloseViewDoc=()=>setViewDoc(null);// Filtered documents by search\nconst filterDocuments=docs=>{let filtered=docs;if(!advanced){if(search){filtered=filtered.filter(doc=>doc.name.toLowerCase().includes(search.toLowerCase()));}return filtered;}// Advanced search\nif(folderName){// Not implemented: folder color, but you can add color property to FolderData if needed\nfiltered=filtered.filter(doc=>currentPath.join(\"/\").toLowerCase().includes(folderName.toLowerCase()));}if(docType){filtered=filtered.filter(doc=>doc.type===docType);}// Date range: assuming doc.fields.Date exists and is in YYYY-MM-DD\nif(dateFrom){filtered=filtered.filter(doc=>{const date=doc.fields.Date;return date&&date>=dateFrom;});}if(dateTo){filtered=filtered.filter(doc=>{const date=doc.fields.Date;return date&&date<=dateTo;});}return filtered;};return/*#__PURE__*/_jsxs(Box,{p:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Document Retrieval\"}),/*#__PURE__*/_jsxs(Breadcrumbs,{\"aria-label\":\"breadcrumb\",sx:{mb:2},children:[/*#__PURE__*/_jsx(Link,{underline:\"hover\",color:\"inherit\",onClick:()=>handleBack(),sx:{cursor:\"pointer\"},children:\"Retrieval\"}),currentPath.map((folder,idx)=>/*#__PURE__*/_jsx(Link,{underline:\"hover\",color:\"inherit\",onClick:()=>handleBack(idx),sx:{cursor:\"pointer\"},children:folder},folder))]}),/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:3},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:advanced?\"Quick Search by Name\":\"Search\",value:search,onChange:e=>setSearch(e.target.value),placeholder:\"Search by document name...\",sx:{mr:2},disabled:advanced}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:advanced,onChange:()=>setAdvanced(v=>!v)}),label:\"Advanced Search\"})]}),advanced&&/*#__PURE__*/_jsxs(Box,{mt:2,display:\"flex\",gap:2,flexWrap:\"wrap\",children:[/*#__PURE__*/_jsx(TextField,{label:\"Folder Name\",value:folderName,onChange:e=>setFolderName(e.target.value),sx:{minWidth:180}}),/*#__PURE__*/_jsx(TextField,{label:\"Color\",value:color,onChange:e=>setColor(e.target.value),sx:{minWidth:120},placeholder:\"e.g. Green\"}),/*#__PURE__*/_jsxs(TextField,{select:true,label:\"Document Type\",value:docType,onChange:e=>setDocType(e.target.value),sx:{minWidth:160},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"All\"}),documentTypes.map(type=>/*#__PURE__*/_jsx(MenuItem,{value:type.id,children:type.name},type.id))]}),/*#__PURE__*/_jsx(TextField,{label:\"Date From\",type:\"date\",value:dateFrom,onChange:e=>setDateFrom(e.target.value),InputLabelProps:{shrink:true},sx:{minWidth:150}}),/*#__PURE__*/_jsx(TextField,{label:\"Date To\",type:\"date\",value:dateTo,onChange:e=>setDateTo(e.target.value),InputLabelProps:{shrink:true},sx:{minWidth:150}})]})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:currentFolder.folders.map(folder=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,display:\"flex\",alignItems:\"center\",cursor:\"pointer\"},onClick:()=>handleFolderClick(folder.name),children:[/*#__PURE__*/_jsx(FolderIcon,{sx:{mr:2,color:\"#43a047\"}}),/*#__PURE__*/_jsx(Typography,{children:folder.name})]})},folder.id))}),/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Documents\"}),/*#__PURE__*/_jsx(List,{children:filterDocuments(currentFolder.documents).map(doc=>/*#__PURE__*/_jsxs(ListItemButton,{onClick:()=>handleViewDoc(doc),children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(FileIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:doc.name,secondary:doc.type})]},doc.id))})]}),/*#__PURE__*/_jsxs(Dialog,{open:!!viewDoc,onClose:handleCloseViewDoc,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[viewDoc===null||viewDoc===void 0?void 0:viewDoc.name,/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"close\",onClick:handleCloseViewDoc,sx:{position:\"absolute\",right:8,top:8},children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:viewDoc&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[\"Type: \",viewDoc.type]}),Object.entries(viewDoc.fields).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/_jsxs(Typography,{children:[key,\": \",value]},key);}),/*#__PURE__*/_jsxs(Typography,{mt:2,children:[\"Attachment: \",viewDoc.attachment]})]})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleCloseViewDoc,children:\"Close\"})})]})]});};export default RetrievalPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}