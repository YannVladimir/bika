{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\bika\\\\bika\\\\frontend\\\\src\\\\pages\\\\Archival\\\\ArchivalPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Box, Typography, Button, Paper, Grid, Breadcrumbs, Link, Modal, TextField, MenuItem, IconButton, Alert, CircularProgress } from \"@mui/material\";\nimport { Add as AddIcon, Close as CloseIcon, Folder as FolderIcon, InsertDriveFile as FileIcon, CreateNewFolder as NewFolderIcon } from \"@mui/icons-material\";\nimport { tokens } from \"../../theme/theme\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport documentService from \"../../services/api/documentService\";\nimport { folderService, documentTypeService } from \"../../services/api\";\n\n// Helper function to find folder by path\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst findFolderByPath = (folders, path) => {\n  if (path.length === 0) return undefined;\n  for (const folder of folders) {\n    if (folder.name === path[0]) {\n      if (path.length === 1) return folder;\n      if (folder.children) {\n        return findFolderByPath(folder.children, path.slice(1));\n      }\n    }\n  }\n  return undefined;\n};\nconst ArchivalPage = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n\n  // State for folders and navigation\n  const [folders, setFolders] = useState([]);\n  const [currentPath, setCurrentPath] = useState([]);\n  const [currentFolder, setCurrentFolder] = useState(null);\n\n  // State for document types\n  const [documentTypes, setDocumentTypes] = useState([]);\n\n  // Modal states\n  const [openUpload, setOpenUpload] = useState(false);\n  const [openNewFolder, setOpenNewFolder] = useState(false);\n  const [viewDoc, setViewDoc] = useState(null);\n\n  // Form states\n  const [selectedType, setSelectedType] = useState(\"\");\n  const [attachment, setAttachment] = useState(null);\n  const [docFields, setDocFields] = useState({});\n  const [newFolderName, setNewFolderName] = useState(\"\");\n  const [newFolderDescription, setNewFolderDescription] = useState(\"\");\n  const [documentName, setDocumentName] = useState(\"\");\n  const [documentCode, setDocumentCode] = useState(\"\");\n\n  // Physical storage metadata states\n  const [physicalStorage, setPhysicalStorage] = useState({\n    room: \"\",\n    cupboard: \"\",\n    drawer: \"\",\n    fileNumber: \"\",\n    fileColor: \"\",\n    documentNumber: \"\",\n    fileSection: \"\",\n    sectionColor: \"\"\n  });\n\n  // Loading and error states\n  const [loading, setLoading] = useState(true);\n  const [uploadLoading, setUploadLoading] = useState(false);\n  const [folderLoading, setFolderLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Load initial data\n  useEffect(() => {\n    const loadInitialData = async () => {\n      if (!(user !== null && user !== void 0 && user.companyId)) return;\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Load root folders and document types in parallel\n        const [foldersData, documentTypesData] = await Promise.all([folderService.getRootFoldersByCompany(user.companyId), documentTypeService.getDocumentTypesByCompany(user.companyId)]);\n        setFolders(foldersData);\n        setDocumentTypes(documentTypesData);\n      } catch (err) {\n        console.error('Error loading data:', err);\n        setError('Failed to load folders and document types');\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadInitialData();\n  }, [user === null || user === void 0 ? void 0 : user.companyId]);\n\n  // Update current folder when path changes\n  useEffect(() => {\n    if (currentPath.length === 0) {\n      setCurrentFolder(null);\n    } else {\n      const folder = findFolderByPath(folders, currentPath);\n      setCurrentFolder(folder || null);\n    }\n  }, [currentPath, folders]);\n\n  // Helper function to reset upload form\n  const resetUploadForm = () => {\n    setSelectedType(\"\");\n    setDocFields({});\n    setAttachment(null);\n    setDocumentName(\"\");\n    setDocumentCode(\"\");\n    setPhysicalStorage({\n      room: \"\",\n      cupboard: \"\",\n      drawer: \"\",\n      fileNumber: \"\",\n      fileColor: \"\",\n      documentNumber: \"\",\n      fileSection: \"\",\n      sectionColor: \"\"\n    });\n  };\n\n  // Folder navigation\n  const handleFolderClick = async folder => {\n    try {\n      setLoading(true);\n      // Get folder contents including documents\n      const folderWithContents = await folderService.getFolderContents(folder.id);\n\n      // Update the folder in our state with the new contents\n      const updateFolderInTree = (folders, targetId, newData) => {\n        return folders.map(f => {\n          if (f.id === targetId) {\n            return {\n              ...f,\n              ...newData\n            };\n          }\n          if (f.children) {\n            return {\n              ...f,\n              children: updateFolderInTree(f.children, targetId, newData)\n            };\n          }\n          return f;\n        });\n      };\n      setFolders(prev => updateFolderInTree(prev, folder.id, folderWithContents));\n      setCurrentPath([...currentPath, folder.name]);\n    } catch (err) {\n      console.error('Error loading folder contents:', err);\n      setError('Failed to load folder contents');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleBack = idx => {\n    if (typeof idx === \"number\") {\n      setCurrentPath(currentPath.slice(0, idx + 1));\n    } else {\n      setCurrentPath([]);\n    }\n  };\n\n  // Create new folder\n  const handleCreateFolder = async () => {\n    if (!newFolderName.trim() || !(user !== null && user !== void 0 && user.companyId)) return;\n    try {\n      setFolderLoading(true);\n      setError(null);\n      const folderRequest = {\n        name: newFolderName,\n        description: newFolderDescription,\n        companyId: user.companyId,\n        departmentId: user.departmentId,\n        parentId: currentFolder === null || currentFolder === void 0 ? void 0 : currentFolder.id\n      };\n      const newFolder = await folderService.createFolder(folderRequest);\n\n      // Add the new folder to the appropriate location in our state\n      if (currentPath.length === 0) {\n        // Adding to root\n        setFolders(prev => [...prev, newFolder]);\n      } else {\n        // Adding to current folder\n        const updateFolderChildren = (folders, path, newChild) => {\n          if (path.length === 0) return folders;\n          return folders.map(f => {\n            if (f.name === path[0]) {\n              if (path.length === 1) {\n                return {\n                  ...f,\n                  children: [...(f.children || []), newChild]\n                };\n              }\n              if (f.children) {\n                return {\n                  ...f,\n                  children: updateFolderChildren(f.children, path.slice(1), newChild)\n                };\n              }\n            }\n            return f;\n          });\n        };\n        setFolders(prev => updateFolderChildren(prev, currentPath, newFolder));\n      }\n      setNewFolderName(\"\");\n      setNewFolderDescription(\"\");\n      setOpenNewFolder(false);\n    } catch (err) {\n      console.error('Error creating folder:', err);\n      setError('Failed to create folder');\n    } finally {\n      setFolderLoading(false);\n    }\n  };\n\n  // Document upload\n  const handleTypeChange = event => {\n    const typeId = event.target.value === \"\" ? \"\" : Number(event.target.value);\n    setSelectedType(typeId);\n    setDocFields({});\n\n    // Set default document name and code from the document type\n    if (typeof typeId === 'number') {\n      const docType = documentTypes.find(t => t.id === typeId);\n      if (docType) {\n        const defaultName = `New ${docType.name}`;\n        const timestamp = Date.now();\n        const defaultCode = `${docType.code}_${timestamp}`;\n        setDocumentName(defaultName);\n        setDocumentCode(defaultCode);\n      }\n    } else {\n      setDocumentName(\"\");\n      setDocumentCode(\"\");\n    }\n  };\n  const handleFieldChange = (fieldKey, value) => {\n    setDocFields(prev => ({\n      ...prev,\n      [fieldKey]: value\n    }));\n  };\n  const handlePhysicalStorageChange = (field, value) => {\n    setPhysicalStorage(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleFileChange = event => {\n    if (event.target.files && event.target.files[0]) {\n      setAttachment(event.target.files[0]);\n    }\n  };\n  const handleUpload = async event => {\n    event.preventDefault();\n\n    // Validate required fields including physical storage\n    const requiredPhysicalFields = ['room', 'cupboard', 'drawer', 'fileNumber', 'fileColor', 'documentNumber', 'fileSection', 'sectionColor'];\n    const missingPhysicalFields = requiredPhysicalFields.filter(field => !physicalStorage[field].trim());\n    if (!selectedType || !(user !== null && user !== void 0 && user.companyId) || !documentName.trim() || !documentCode.trim() || missingPhysicalFields.length > 0) {\n      if (missingPhysicalFields.length > 0) {\n        setError(`Please fill in all physical storage fields: ${missingPhysicalFields.join(', ')}`);\n      }\n      return;\n    }\n    try {\n      setUploadLoading(true);\n      setError(null);\n\n      // Create document request with user-provided code and physical storage\n      let documentRequest = {\n        name: documentName,\n        code: documentCode,\n        documentTypeId: selectedType,\n        companyId: user.companyId,\n        departmentId: user.departmentId,\n        folderId: currentFolder === null || currentFolder === void 0 ? void 0 : currentFolder.id,\n        fieldValues: docFields,\n        status: 'ACTIVE',\n        physicalLocation: JSON.stringify(physicalStorage)\n      };\n\n      // Add file information if attachment is provided\n      if (attachment) {\n        documentRequest = documentService.prepareDocumentForUpload(documentRequest, attachment);\n        // Preserve physical storage data when adding file info\n        documentRequest.physicalLocation = JSON.stringify(physicalStorage);\n      }\n      const newDocument = await documentService.createDocument(documentRequest);\n\n      // Add the document to the current folder's documents\n      if (currentFolder) {\n        setFolders(prev => {\n          const updateFolderDocuments = (folders, path, newDoc) => {\n            if (path.length === 0) return folders;\n            return folders.map(f => {\n              if (f.name === path[0]) {\n                if (path.length === 1) {\n                  return {\n                    ...f,\n                    documents: [...(f.documents || []), newDoc]\n                  };\n                }\n                if (f.children) {\n                  return {\n                    ...f,\n                    children: updateFolderDocuments(f.children, path.slice(1), newDoc)\n                  };\n                }\n              }\n              return f;\n            });\n          };\n          return updateFolderDocuments(prev, currentPath, newDocument);\n        });\n      }\n\n      // Reset form\n      setOpenUpload(false);\n      resetUploadForm();\n    } catch (err) {\n      console.error('Error uploading document:', err);\n      setError('Failed to upload document');\n    } finally {\n      setUploadLoading(false);\n    }\n  };\n\n  // View document\n  const handleViewDoc = doc => setViewDoc(doc);\n  const handleCloseViewDoc = () => setViewDoc(null);\n\n  // Get current folder data for display\n  const getCurrentFolderData = () => {\n    if (currentPath.length === 0) {\n      return {\n        folders,\n        documents: []\n      };\n    }\n    const folder = findFolderByPath(folders, currentPath);\n    return {\n      folders: (folder === null || folder === void 0 ? void 0 : folder.children) || [],\n      documents: (folder === null || folder === void 0 ? void 0 : folder.documents) || []\n    };\n  };\n  const {\n    folders: currentFolders,\n    documents: currentDocuments\n  } = getCurrentFolderData();\n  const selectedDocumentType = documentTypes.find(dt => dt.id === selectedType);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      minHeight: \"400px\",\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    p: 3,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      fontWeight: 600,\n      mb: 4,\n      children: \"Document Archival\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      onClose: () => setError(null),\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Breadcrumbs, {\n      sx: {\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        component: \"button\",\n        variant: \"body1\",\n        onClick: () => handleBack(),\n        sx: {\n          color: tokens.primary.main\n        },\n        children: \"Archival\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), currentPath.map((name, idx) => /*#__PURE__*/_jsxDEV(Link, {\n        component: \"button\",\n        variant: \"body1\",\n        onClick: () => handleBack(idx),\n        sx: {\n          color: tokens.primary.main\n        },\n        children: name\n      }, `${name}-${idx}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        gap: 2,\n        justifyContent: \"flex-end\",\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        startIcon: /*#__PURE__*/_jsxDEV(NewFolderIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 22\n        }, this),\n        onClick: () => setOpenNewFolder(true),\n        disabled: loading,\n        children: \"New Folder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 22\n        }, this),\n        onClick: () => setOpenUpload(true),\n        disabled: loading || documentTypes.length === 0,\n        sx: {\n          bgcolor: tokens.primary.main,\n          \"&:hover\": {\n            bgcolor: tokens.primary.dark\n          }\n        },\n        children: \"Upload Document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 0,\n      sx: {\n        p: 2,\n        backgroundColor: tokens.grey[100],\n        borderRadius: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [currentFolders.map(folder => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 0,\n            sx: {\n              p: 2,\n              cursor: \"pointer\",\n              \"&:hover\": {\n                backgroundColor: tokens.grey[200]\n              }\n            },\n            onClick: () => handleFolderClick(folder),\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: 2,\n              children: [/*#__PURE__*/_jsxDEV(FolderIcon, {\n                sx: {\n                  color: tokens.secondary.main\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  children: folder.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this), folder.description && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: folder.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this)\n        }, folder.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this)), currentDocuments.map(doc => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 0,\n            sx: {\n              p: 2,\n              cursor: \"pointer\",\n              \"&:hover\": {\n                backgroundColor: tokens.grey[200]\n              }\n            },\n            onClick: () => handleViewDoc(doc),\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: 2,\n              children: [/*#__PURE__*/_jsxDEV(FileIcon, {\n                sx: {\n                  color: tokens.primary.main\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  children: doc.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: doc.documentTypeName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this), doc.fileSize && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: [(doc.fileSize / 1024 / 1024).toFixed(2), \" MB\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 15\n          }, this)\n        }, doc.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), currentFolders.length === 0 && currentDocuments.length === 0 && /*#__PURE__*/_jsxDEV(Box, {\n        textAlign: \"center\",\n        py: 4,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"text.secondary\",\n          children: \"No folders or documents found. Create a folder or upload a document to get started.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: openNewFolder,\n      onClose: () => setOpenNewFolder(false),\n      \"aria-labelledby\": \"new-folder-modal\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          width: 400,\n          bgcolor: \"background.paper\",\n          boxShadow: 24,\n          p: 4,\n          borderRadius: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"Create New Folder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: () => setOpenNewFolder(false),\n            size: \"small\",\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Folder Name\",\n          value: newFolderName,\n          onChange: e => setNewFolderName(e.target.value),\n          margin: \"normal\",\n          required: true,\n          error: !newFolderName.trim() && newFolderName.length > 0,\n          helperText: !newFolderName.trim() && newFolderName.length > 0 ? \"Folder name is required\" : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Description (Optional)\",\n          value: newFolderDescription,\n          onChange: e => setNewFolderDescription(e.target.value),\n          margin: \"normal\",\n          multiline: true,\n          rows: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            gap: 2,\n            mt: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            onClick: () => setOpenNewFolder(false),\n            fullWidth: true,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: handleCreateFolder,\n            disabled: !newFolderName.trim() || folderLoading,\n            fullWidth: true,\n            sx: {\n              bgcolor: tokens.primary.main,\n              \"&:hover\": {\n                bgcolor: tokens.primary.dark\n              }\n            },\n            children: folderLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 32\n            }, this) : \"Create\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: openUpload,\n      onClose: () => {\n        setOpenUpload(false);\n        resetUploadForm();\n      },\n      \"aria-labelledby\": \"upload-document-modal\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          width: 500,\n          bgcolor: \"background.paper\",\n          boxShadow: 24,\n          p: 4,\n          borderRadius: 2,\n          maxHeight: '90vh',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"Upload Document\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: () => {\n              setOpenUpload(false);\n              resetUploadForm();\n            },\n            size: \"small\",\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleUpload,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Document Name\",\n            value: documentName,\n            onChange: e => setDocumentName(e.target.value),\n            margin: \"normal\",\n            required: true,\n            error: !documentName.trim() && documentName.length > 0,\n            helperText: !documentName.trim() && documentName.length > 0 ? \"Document name is required\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Document Code\",\n            value: documentCode,\n            onChange: e => setDocumentCode(e.target.value),\n            margin: \"normal\",\n            required: true,\n            error: !documentCode.trim() && documentCode.length > 0,\n            helperText: !documentCode.trim() && documentCode.length > 0 ? \"Document code is required\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            select: true,\n            fullWidth: true,\n            label: \"Document Type\",\n            value: selectedType,\n            onChange: handleTypeChange,\n            margin: \"normal\",\n            required: true,\n            error: !selectedType,\n            helperText: !selectedType ? \"Please select a document type\" : \"\",\n            children: documentTypes.map(type => /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: type.id,\n              children: type.name\n            }, type.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 13\n          }, this), selectedDocumentType && selectedDocumentType.fields.map(field => {\n            var _field$options;\n            return /*#__PURE__*/_jsxDEV(TextField, {\n              label: field.name + (field.required ? ' *' : ''),\n              fullWidth: true,\n              margin: \"normal\",\n              type: field.fieldType === 'NUMBER' ? 'number' : field.fieldType === 'DATE' ? 'date' : field.fieldType === 'EMAIL' ? 'email' : 'text',\n              multiline: field.fieldType === 'TEXTAREA',\n              rows: field.fieldType === 'TEXTAREA' ? 3 : 1,\n              select: field.fieldType === 'SELECT',\n              value: docFields[field.fieldKey] || field.defaultValue || '',\n              onChange: e => handleFieldChange(field.fieldKey, e.target.value),\n              required: field.required,\n              helperText: field.description,\n              InputLabelProps: field.fieldType === 'DATE' ? {\n                shrink: true\n              } : undefined,\n              children: field.fieldType === 'SELECT' && ((_field$options = field.options) === null || _field$options === void 0 ? void 0 : _field$options.map(option => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: option,\n                children: option\n              }, option, false, {\n                fileName: _jsxFileName,\n                lineNumber: 698,\n                columnNumber: 19\n              }, this)))\n            }, field.fieldKey, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 15\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            sx: {\n              mt: 3,\n              mb: 1\n            },\n            children: \"Physical Storage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 706,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            sx: {\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Room\",\n                value: physicalStorage.room,\n                onChange: e => handlePhysicalStorageChange('room', e.target.value),\n                margin: \"normal\",\n                required: true,\n                error: !physicalStorage.room.trim(),\n                helperText: !physicalStorage.room.trim() ? \"Room is required\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 709,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Cupboard\",\n                value: physicalStorage.cupboard,\n                onChange: e => handlePhysicalStorageChange('cupboard', e.target.value),\n                margin: \"normal\",\n                required: true,\n                error: !physicalStorage.cupboard.trim(),\n                helperText: !physicalStorage.cupboard.trim() ? \"Cupboard is required\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 721,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Drawer\",\n                value: physicalStorage.drawer,\n                onChange: e => handlePhysicalStorageChange('drawer', e.target.value),\n                margin: \"normal\",\n                required: true,\n                error: !physicalStorage.drawer.trim(),\n                helperText: !physicalStorage.drawer.trim() ? \"Drawer is required\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"File Number\",\n                value: physicalStorage.fileNumber,\n                onChange: e => handlePhysicalStorageChange('fileNumber', e.target.value),\n                margin: \"normal\",\n                required: true,\n                error: !physicalStorage.fileNumber.trim(),\n                helperText: !physicalStorage.fileNumber.trim() ? \"File number is required\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"File Color\",\n                value: physicalStorage.fileColor,\n                onChange: e => handlePhysicalStorageChange('fileColor', e.target.value),\n                margin: \"normal\",\n                required: true,\n                error: !physicalStorage.fileColor.trim(),\n                helperText: !physicalStorage.fileColor.trim() ? \"File color is required\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 757,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Document Number\",\n                value: physicalStorage.documentNumber,\n                onChange: e => handlePhysicalStorageChange('documentNumber', e.target.value),\n                margin: \"normal\",\n                required: true,\n                error: !physicalStorage.documentNumber.trim(),\n                helperText: !physicalStorage.documentNumber.trim() ? \"Document number is required\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 768,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"File Section\",\n                value: physicalStorage.fileSection,\n                onChange: e => handlePhysicalStorageChange('fileSection', e.target.value),\n                margin: \"normal\",\n                required: true,\n                error: !physicalStorage.fileSection.trim(),\n                helperText: !physicalStorage.fileSection.trim() ? \"File section is required\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 781,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Section Color\",\n                value: physicalStorage.sectionColor,\n                onChange: e => handlePhysicalStorageChange('sectionColor', e.target.value),\n                margin: \"normal\",\n                required: true,\n                error: !physicalStorage.sectionColor.trim(),\n                helperText: !physicalStorage.sectionColor.trim() ? \"Section color is required\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 793,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 792,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 707,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            accept: \"*/*\",\n            style: {\n              display: \"none\"\n            },\n            id: \"attachment-input\",\n            type: \"file\",\n            onChange: handleFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 806,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"attachment-input\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              component: \"span\",\n              fullWidth: true,\n              sx: {\n                mt: 2\n              },\n              children: attachment ? `Selected: ${attachment.name}` : \"Select File (Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 814,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 813,\n            columnNumber: 13\n          }, this), attachment && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              children: [\"File: \", attachment.name, \" (\", (attachment.size / 1024 / 1024).toFixed(2), \" MB)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 826,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 825,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: \"flex\",\n              gap: 2,\n              mt: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              onClick: () => {\n                setOpenUpload(false);\n                resetUploadForm();\n              },\n              fullWidth: true,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 833,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              variant: \"contained\",\n              disabled: !selectedType || !documentName.trim() || !documentCode.trim() || uploadLoading,\n              fullWidth: true,\n              sx: {\n                bgcolor: tokens.primary.main,\n                \"&:hover\": {\n                  bgcolor: tokens.primary.dark\n                }\n              },\n              children: uploadLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 853,\n                columnNumber: 34\n              }, this) : \"Upload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 843,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 832,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!viewDoc,\n      onClose: handleCloseViewDoc,\n      \"aria-labelledby\": \"view-document-modal\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          width: 500,\n          bgcolor: \"background.paper\",\n          boxShadow: 24,\n          p: 4,\n          borderRadius: 2,\n          maxHeight: '90vh',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h2\",\n            children: viewDoc === null || viewDoc === void 0 ? void 0 : viewDoc.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 889,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleCloseViewDoc,\n            size: \"small\",\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 892,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 881,\n          columnNumber: 11\n        }, this), viewDoc && /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            sx: {\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Document Type:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 900,\n              columnNumber: 17\n            }, this), \" \", viewDoc.documentTypeName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 899,\n            columnNumber: 15\n          }, this), viewDoc.metadata && Object.entries(viewDoc.metadata).map(([key, value]) => /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            sx: {\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [key, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 905,\n              columnNumber: 19\n            }, this), \" \", value === null || value === void 0 ? void 0 : value.toString()]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 904,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 2,\n              pt: 2,\n              borderTop: 1,\n              borderColor: 'divider'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"File:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 911,\n                columnNumber: 19\n              }, this), \" \", viewDoc.filePath || 'No file attached']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 910,\n              columnNumber: 17\n            }, this), viewDoc.fileSize && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Size:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 915,\n                columnNumber: 21\n              }, this), \" \", (viewDoc.fileSize / 1024 / 1024).toFixed(2), \" MB\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 914,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 919,\n                columnNumber: 19\n              }, this), \" \", viewDoc.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 918,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Created:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 922,\n                columnNumber: 19\n              }, this), \" \", viewDoc.createdAt ? new Date(viewDoc.createdAt).toLocaleString() : 'Unknown']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 921,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 909,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 866,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 5\n  }, this);\n};\n_s(ArchivalPage, \"8ga5cUNrfETVMJShymwTSJ9I4s8=\", false, function () {\n  return [useAuth];\n});\n_c = ArchivalPage;\nexport default ArchivalPage;\nvar _c;\n$RefreshReg$(_c, \"ArchivalPage\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Button","Paper","Grid","Breadcrumbs","Link","Modal","TextField","MenuItem","IconButton","Alert","CircularProgress","Add","AddIcon","Close","CloseIcon","Folder","FolderIcon","InsertDriveFile","FileIcon","CreateNewFolder","NewFolderIcon","tokens","useAuth","documentService","folderService","documentTypeService","jsxDEV","_jsxDEV","findFolderByPath","folders","path","length","undefined","folder","name","children","slice","ArchivalPage","_s","user","setFolders","currentPath","setCurrentPath","currentFolder","setCurrentFolder","documentTypes","setDocumentTypes","openUpload","setOpenUpload","openNewFolder","setOpenNewFolder","viewDoc","setViewDoc","selectedType","setSelectedType","attachment","setAttachment","docFields","setDocFields","newFolderName","setNewFolderName","newFolderDescription","setNewFolderDescription","documentName","setDocumentName","documentCode","setDocumentCode","physicalStorage","setPhysicalStorage","room","cupboard","drawer","fileNumber","fileColor","documentNumber","fileSection","sectionColor","loading","setLoading","uploadLoading","setUploadLoading","folderLoading","setFolderLoading","error","setError","loadInitialData","companyId","foldersData","documentTypesData","Promise","all","getRootFoldersByCompany","getDocumentTypesByCompany","err","console","resetUploadForm","handleFolderClick","folderWithContents","getFolderContents","id","updateFolderInTree","targetId","newData","map","f","prev","handleBack","idx","handleCreateFolder","trim","folderRequest","description","departmentId","parentId","newFolder","createFolder","updateFolderChildren","newChild","handleTypeChange","event","typeId","target","value","Number","docType","find","t","defaultName","timestamp","Date","now","defaultCode","code","handleFieldChange","fieldKey","handlePhysicalStorageChange","field","handleFileChange","files","handleUpload","preventDefault","requiredPhysicalFields","missingPhysicalFields","filter","join","documentRequest","documentTypeId","folderId","fieldValues","status","physicalLocation","JSON","stringify","prepareDocumentForUpload","newDocument","createDocument","updateFolderDocuments","newDoc","documents","handleViewDoc","doc","handleCloseViewDoc","getCurrentFolderData","currentFolders","currentDocuments","selectedDocumentType","dt","display","justifyContent","alignItems","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","width","boxSizing","p","variant","fontWeight","mb","severity","sx","onClose","component","onClick","color","primary","main","gap","startIcon","disabled","bgcolor","dark","elevation","backgroundColor","grey","borderRadius","container","spacing","item","xs","sm","md","cursor","secondary","documentTypeName","fileSize","toFixed","textAlign","py","open","position","top","left","transform","boxShadow","size","fullWidth","label","onChange","e","margin","required","helperText","multiline","rows","mt","maxHeight","overflow","onSubmit","select","type","fields","_field$options","fieldType","defaultValue","InputLabelProps","shrink","options","option","accept","style","htmlFor","metadata","Object","entries","key","toString","pt","borderTop","borderColor","filePath","createdAt","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/bika/bika/frontend/src/pages/Archival/ArchivalPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Paper,\r\n  Grid,\r\n  Breadcrumbs,\r\n  Link,\r\n  Modal,\r\n  TextField,\r\n  MenuItem,\r\n  IconButton,\r\n  Alert,\r\n  CircularProgress,\r\n  FormHelperText,\r\n} from \"@mui/material\";\r\nimport {\r\n  Add as AddIcon,\r\n  Close as CloseIcon,\r\n  Folder as FolderIcon,\r\n  InsertDriveFile as FileIcon,\r\n  CreateNewFolder as NewFolderIcon,\r\n} from \"@mui/icons-material\";\r\nimport { tokens } from \"../../theme/theme\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { Document, Folder, DocumentType, CreateDocumentRequest, PhysicalStorageLookup } from \"../../services/api/types\";\r\nimport documentService from \"../../services/api/documentService\";\r\nimport { \r\n  folderService, \r\n  documentTypeService,\r\n  CreateFolderRequest \r\n} from \"../../services/api\";\r\n\r\n// Helper function to find folder by path\r\nconst findFolderByPath = (folders: Folder[], path: string[]): Folder | undefined => {\r\n  if (path.length === 0) return undefined;\r\n  \r\n  for (const folder of folders) {\r\n    if (folder.name === path[0]) {\r\n      if (path.length === 1) return folder;\r\n      if (folder.children) {\r\n        return findFolderByPath(folder.children, path.slice(1));\r\n      }\r\n    }\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst ArchivalPage: React.FC = () => {\r\n  const { user } = useAuth();\r\n  \r\n  // State for folders and navigation\r\n  const [folders, setFolders] = useState<Folder[]>([]);\r\n  const [currentPath, setCurrentPath] = useState<string[]>([]);\r\n  const [currentFolder, setCurrentFolder] = useState<Folder | null>(null);\r\n  \r\n  // State for document types\r\n  const [documentTypes, setDocumentTypes] = useState<DocumentType[]>([]);\r\n  \r\n  // Modal states\r\n  const [openUpload, setOpenUpload] = useState(false);\r\n  const [openNewFolder, setOpenNewFolder] = useState(false);\r\n  const [viewDoc, setViewDoc] = useState<Document | null>(null);\r\n  \r\n  // Form states\r\n  const [selectedType, setSelectedType] = useState<number | \"\">(\"\");\r\n  const [attachment, setAttachment] = useState<File | null>(null);\r\n  const [docFields, setDocFields] = useState<{ [key: string]: any }>({});\r\n  const [newFolderName, setNewFolderName] = useState(\"\");\r\n  const [newFolderDescription, setNewFolderDescription] = useState(\"\");\r\n  const [documentName, setDocumentName] = useState(\"\");\r\n  const [documentCode, setDocumentCode] = useState(\"\");\r\n  \r\n  // Physical storage metadata states\r\n  const [physicalStorage, setPhysicalStorage] = useState({\r\n    room: \"\",\r\n    cupboard: \"\",\r\n    drawer: \"\",\r\n    fileNumber: \"\",\r\n    fileColor: \"\",\r\n    documentNumber: \"\",\r\n    fileSection: \"\",\r\n    sectionColor: \"\"\r\n  });\r\n  \r\n  // Loading and error states\r\n  const [loading, setLoading] = useState(true);\r\n  const [uploadLoading, setUploadLoading] = useState(false);\r\n  const [folderLoading, setFolderLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Load initial data\r\n  useEffect(() => {\r\n    const loadInitialData = async () => {\r\n      if (!user?.companyId) return;\r\n      \r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        // Load root folders and document types in parallel\r\n        const [foldersData, documentTypesData] = await Promise.all([\r\n          folderService.getRootFoldersByCompany(user.companyId),\r\n          documentTypeService.getDocumentTypesByCompany(user.companyId)\r\n        ]);\r\n        \r\n        setFolders(foldersData);\r\n        setDocumentTypes(documentTypesData);\r\n      } catch (err) {\r\n        console.error('Error loading data:', err);\r\n        setError('Failed to load folders and document types');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadInitialData();\r\n  }, [user?.companyId]);\r\n\r\n  // Update current folder when path changes\r\n  useEffect(() => {\r\n    if (currentPath.length === 0) {\r\n      setCurrentFolder(null);\r\n    } else {\r\n      const folder = findFolderByPath(folders, currentPath);\r\n      setCurrentFolder(folder || null);\r\n    }\r\n  }, [currentPath, folders]);\r\n\r\n  // Helper function to reset upload form\r\n  const resetUploadForm = () => {\r\n    setSelectedType(\"\");\r\n    setDocFields({});\r\n    setAttachment(null);\r\n    setDocumentName(\"\");\r\n    setDocumentCode(\"\");\r\n    setPhysicalStorage({\r\n      room: \"\",\r\n      cupboard: \"\",\r\n      drawer: \"\",\r\n      fileNumber: \"\",\r\n      fileColor: \"\",\r\n      documentNumber: \"\",\r\n      fileSection: \"\",\r\n      sectionColor: \"\"\r\n    });\r\n  };\r\n\r\n  // Folder navigation\r\n  const handleFolderClick = async (folder: Folder) => {\r\n    try {\r\n      setLoading(true);\r\n      // Get folder contents including documents\r\n      const folderWithContents = await folderService.getFolderContents(folder.id);\r\n      \r\n      // Update the folder in our state with the new contents\r\n      const updateFolderInTree = (folders: Folder[], targetId: number, newData: Folder): Folder[] => {\r\n        return folders.map(f => {\r\n          if (f.id === targetId) {\r\n            return { ...f, ...newData };\r\n          }\r\n          if (f.children) {\r\n            return { ...f, children: updateFolderInTree(f.children, targetId, newData) };\r\n          }\r\n          return f;\r\n        });\r\n      };\r\n      \r\n      setFolders(prev => updateFolderInTree(prev, folder.id, folderWithContents));\r\n      setCurrentPath([...currentPath, folder.name]);\r\n    } catch (err) {\r\n      console.error('Error loading folder contents:', err);\r\n      setError('Failed to load folder contents');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleBack = (idx?: number) => {\r\n    if (typeof idx === \"number\") {\r\n      setCurrentPath(currentPath.slice(0, idx + 1));\r\n    } else {\r\n      setCurrentPath([]);\r\n    }\r\n  };\r\n\r\n  // Create new folder\r\n  const handleCreateFolder = async () => {\r\n    if (!newFolderName.trim() || !user?.companyId) return;\r\n    \r\n    try {\r\n      setFolderLoading(true);\r\n      setError(null);\r\n      \r\n      const folderRequest: CreateFolderRequest = {\r\n        name: newFolderName,\r\n        description: newFolderDescription,\r\n        companyId: user.companyId,\r\n        departmentId: user.departmentId,\r\n        parentId: currentFolder?.id,\r\n      };\r\n      \r\n      const newFolder = await folderService.createFolder(folderRequest);\r\n      \r\n      // Add the new folder to the appropriate location in our state\r\n      if (currentPath.length === 0) {\r\n        // Adding to root\r\n        setFolders(prev => [...prev, newFolder]);\r\n      } else {\r\n        // Adding to current folder\r\n        const updateFolderChildren = (folders: Folder[], path: string[], newChild: Folder): Folder[] => {\r\n          if (path.length === 0) return folders;\r\n          \r\n          return folders.map(f => {\r\n            if (f.name === path[0]) {\r\n              if (path.length === 1) {\r\n                return { ...f, children: [...(f.children || []), newChild] };\r\n              }\r\n              if (f.children) {\r\n                return { ...f, children: updateFolderChildren(f.children, path.slice(1), newChild) };\r\n              }\r\n            }\r\n            return f;\r\n          });\r\n        };\r\n        \r\n        setFolders(prev => updateFolderChildren(prev, currentPath, newFolder));\r\n      }\r\n      \r\n      setNewFolderName(\"\");\r\n      setNewFolderDescription(\"\");\r\n      setOpenNewFolder(false);\r\n    } catch (err) {\r\n      console.error('Error creating folder:', err);\r\n      setError('Failed to create folder');\r\n    } finally {\r\n      setFolderLoading(false);\r\n    }\r\n  };\r\n\r\n  // Document upload\r\n  const handleTypeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const typeId = event.target.value === \"\" ? \"\" : Number(event.target.value);\r\n    setSelectedType(typeId);\r\n    setDocFields({});\r\n    \r\n    // Set default document name and code from the document type\r\n    if (typeof typeId === 'number') {\r\n      const docType = documentTypes.find(t => t.id === typeId);\r\n      if (docType) {\r\n        const defaultName = `New ${docType.name}`;\r\n        const timestamp = Date.now();\r\n        const defaultCode = `${docType.code}_${timestamp}`;\r\n        \r\n        setDocumentName(defaultName);\r\n        setDocumentCode(defaultCode);\r\n      }\r\n    } else {\r\n      setDocumentName(\"\");\r\n      setDocumentCode(\"\");\r\n    }\r\n  };\r\n\r\n  const handleFieldChange = (fieldKey: string, value: any) => {\r\n    setDocFields(prev => ({ ...prev, [fieldKey]: value }));\r\n  };\r\n\r\n  const handlePhysicalStorageChange = (field: string, value: string) => {\r\n    setPhysicalStorage(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      setAttachment(event.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleUpload = async (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    \r\n    // Validate required fields including physical storage\r\n    const requiredPhysicalFields = ['room', 'cupboard', 'drawer', 'fileNumber', 'fileColor', 'documentNumber', 'fileSection', 'sectionColor'];\r\n    const missingPhysicalFields = requiredPhysicalFields.filter(field => !physicalStorage[field as keyof typeof physicalStorage].trim());\r\n    \r\n    if (!selectedType || !user?.companyId || !documentName.trim() || !documentCode.trim() || missingPhysicalFields.length > 0) {\r\n      if (missingPhysicalFields.length > 0) {\r\n        setError(`Please fill in all physical storage fields: ${missingPhysicalFields.join(', ')}`);\r\n      }\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setUploadLoading(true);\r\n      setError(null);\r\n      \r\n      // Create document request with user-provided code and physical storage\r\n      let documentRequest: CreateDocumentRequest = {\r\n        name: documentName,\r\n        code: documentCode,\r\n        documentTypeId: selectedType as number,\r\n        companyId: user.companyId,\r\n        departmentId: user.departmentId,\r\n        folderId: currentFolder?.id,\r\n        fieldValues: docFields,\r\n        status: 'ACTIVE',\r\n        physicalLocation: JSON.stringify(physicalStorage),\r\n      };\r\n      \r\n      // Add file information if attachment is provided\r\n      if (attachment) {\r\n        documentRequest = documentService.prepareDocumentForUpload(documentRequest, attachment);\r\n        // Preserve physical storage data when adding file info\r\n        documentRequest.physicalLocation = JSON.stringify(physicalStorage);\r\n      }\r\n      \r\n      const newDocument = await documentService.createDocument(documentRequest);\r\n      \r\n      // Add the document to the current folder's documents\r\n      if (currentFolder) {\r\n        setFolders(prev => {\r\n          const updateFolderDocuments = (folders: Folder[], path: string[], newDoc: Document): Folder[] => {\r\n            if (path.length === 0) return folders;\r\n            \r\n            return folders.map(f => {\r\n              if (f.name === path[0]) {\r\n                if (path.length === 1) {\r\n                  return { ...f, documents: [...(f.documents || []), newDoc] };\r\n                }\r\n                if (f.children) {\r\n                  return { ...f, children: updateFolderDocuments(f.children, path.slice(1), newDoc) };\r\n                }\r\n              }\r\n              return f;\r\n            });\r\n          };\r\n          \r\n          return updateFolderDocuments(prev, currentPath, newDocument);\r\n        });\r\n      }\r\n      \r\n      // Reset form\r\n      setOpenUpload(false);\r\n      resetUploadForm();\r\n    } catch (err) {\r\n      console.error('Error uploading document:', err);\r\n      setError('Failed to upload document');\r\n    } finally {\r\n      setUploadLoading(false);\r\n    }\r\n  };\r\n\r\n  // View document\r\n  const handleViewDoc = (doc: Document) => setViewDoc(doc);\r\n  const handleCloseViewDoc = () => setViewDoc(null);\r\n\r\n  // Get current folder data for display\r\n  const getCurrentFolderData = () => {\r\n    if (currentPath.length === 0) {\r\n      return { folders, documents: [] };\r\n    }\r\n    \r\n    const folder = findFolderByPath(folders, currentPath);\r\n    return {\r\n      folders: folder?.children || [],\r\n      documents: folder?.documents || []\r\n    };\r\n  };\r\n\r\n  const { folders: currentFolders, documents: currentDocuments } = getCurrentFolderData();\r\n  const selectedDocumentType = documentTypes.find(dt => dt.id === selectedType);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box width=\"100%\" boxSizing=\"border-box\" p={3}>\r\n      <Typography variant=\"h4\" fontWeight={600} mb={4}>\r\n        Document Archival\r\n      </Typography>\r\n\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError(null)}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Breadcrumbs */}\r\n      <Breadcrumbs sx={{ mb: 2 }}>\r\n        <Link\r\n          component=\"button\"\r\n          variant=\"body1\"\r\n          onClick={() => handleBack()}\r\n          sx={{ color: tokens.primary.main }}\r\n        >\r\n          Archival\r\n        </Link>\r\n        {currentPath.map((name, idx) => (\r\n          <Link\r\n            key={`${name}-${idx}`}\r\n            component=\"button\"\r\n            variant=\"body1\"\r\n            onClick={() => handleBack(idx)}\r\n            sx={{ color: tokens.primary.main }}\r\n          >\r\n            {name}\r\n          </Link>\r\n        ))}\r\n      </Breadcrumbs>\r\n\r\n      {/* Action Buttons */}\r\n      <Box sx={{ display: \"flex\", gap: 2, justifyContent: \"flex-end\", mb: 2 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<NewFolderIcon />}\r\n          onClick={() => setOpenNewFolder(true)}\r\n          disabled={loading}\r\n        >\r\n          New Folder\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          startIcon={<AddIcon />}\r\n          onClick={() => setOpenUpload(true)}\r\n          disabled={loading || documentTypes.length === 0}\r\n          sx={{\r\n            bgcolor: tokens.primary.main,\r\n            \"&:hover\": { bgcolor: tokens.primary.dark },\r\n          }}\r\n        >\r\n          Upload Document\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* Folders and Documents Grid */}\r\n      <Paper\r\n        elevation={0}\r\n        sx={{ p: 2, backgroundColor: tokens.grey[100], borderRadius: 2 }}\r\n      >\r\n        <Grid container spacing={2}>\r\n          {currentFolders.map((folder) => (\r\n            <Grid item xs={12} sm={6} md={4} key={folder.id}>\r\n              <Paper\r\n                elevation={0}\r\n                sx={{\r\n                  p: 2,\r\n                  cursor: \"pointer\",\r\n                  \"&:hover\": { backgroundColor: tokens.grey[200] },\r\n                }}\r\n                onClick={() => handleFolderClick(folder)}\r\n              >\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                  <FolderIcon sx={{ color: tokens.secondary.main }} />\r\n                  <Box>\r\n                    <Typography>{folder.name}</Typography>\r\n                    {folder.description && (\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        {folder.description}\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n                </Box>\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n          \r\n          {currentDocuments.map((doc) => (\r\n            <Grid item xs={12} sm={6} md={4} key={doc.id}>\r\n              <Paper\r\n                elevation={0}\r\n                sx={{\r\n                  p: 2,\r\n                  cursor: \"pointer\",\r\n                  \"&:hover\": { backgroundColor: tokens.grey[200] },\r\n                }}\r\n                onClick={() => handleViewDoc(doc)}\r\n              >\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                  <FileIcon sx={{ color: tokens.primary.main }} />\r\n                  <Box>\r\n                    <Typography>{doc.name}</Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      {doc.documentTypeName}\r\n                    </Typography>\r\n                    {doc.fileSize && (\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        {(doc.fileSize / 1024 / 1024).toFixed(2)} MB\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n                </Box>\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        {currentFolders.length === 0 && currentDocuments.length === 0 && (\r\n          <Box textAlign=\"center\" py={4}>\r\n            <Typography color=\"text.secondary\">\r\n              No folders or documents found. Create a folder or upload a document to get started.\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* New Folder Dialog */}\r\n      <Modal\r\n        open={openNewFolder}\r\n        onClose={() => setOpenNewFolder(false)}\r\n        aria-labelledby=\"new-folder-modal\"\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: 400,\r\n            bgcolor: \"background.paper\",\r\n            boxShadow: 24,\r\n            p: 4,\r\n            borderRadius: 2,\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              mb: 2,\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" component=\"h2\">\r\n              Create New Folder\r\n            </Typography>\r\n            <IconButton onClick={() => setOpenNewFolder(false)} size=\"small\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Box>\r\n          \r\n          <TextField\r\n            fullWidth\r\n            label=\"Folder Name\"\r\n            value={newFolderName}\r\n            onChange={(e) => setNewFolderName(e.target.value)}\r\n            margin=\"normal\"\r\n            required\r\n            error={!newFolderName.trim() && newFolderName.length > 0}\r\n            helperText={!newFolderName.trim() && newFolderName.length > 0 ? \"Folder name is required\" : \"\"}\r\n          />\r\n          \r\n          <TextField\r\n            fullWidth\r\n            label=\"Description (Optional)\"\r\n            value={newFolderDescription}\r\n            onChange={(e) => setNewFolderDescription(e.target.value)}\r\n            margin=\"normal\"\r\n            multiline\r\n            rows={2}\r\n          />\r\n          \r\n          <Box sx={{ display: \"flex\", gap: 2, mt: 3 }}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={() => setOpenNewFolder(false)}\r\n              fullWidth\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleCreateFolder}\r\n              disabled={!newFolderName.trim() || folderLoading}\r\n              fullWidth\r\n              sx={{\r\n                bgcolor: tokens.primary.main,\r\n                \"&:hover\": { bgcolor: tokens.primary.dark },\r\n              }}\r\n            >\r\n              {folderLoading ? <CircularProgress size={20} /> : \"Create\"}\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </Modal>\r\n\r\n      {/* Upload Document Modal */}\r\n      <Modal\r\n        open={openUpload}\r\n        onClose={() => {\r\n          setOpenUpload(false);\r\n          resetUploadForm();\r\n        }}\r\n        aria-labelledby=\"upload-document-modal\"\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: 500,\r\n            bgcolor: \"background.paper\",\r\n            boxShadow: 24,\r\n            p: 4,\r\n            borderRadius: 2,\r\n            maxHeight: '90vh',\r\n            overflow: 'auto',\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              mb: 2,\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" component=\"h2\">\r\n              Upload Document\r\n            </Typography>\r\n            <IconButton \r\n              onClick={() => {\r\n                setOpenUpload(false);\r\n                resetUploadForm();\r\n              }} \r\n              size=\"small\"\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Box>\r\n          \r\n          <form onSubmit={handleUpload}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"Document Name\"\r\n              value={documentName}\r\n              onChange={(e) => setDocumentName(e.target.value)}\r\n              margin=\"normal\"\r\n              required\r\n              error={!documentName.trim() && documentName.length > 0}\r\n              helperText={!documentName.trim() && documentName.length > 0 ? \"Document name is required\" : \"\"}\r\n            />\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Document Code\"\r\n              value={documentCode}\r\n              onChange={(e) => setDocumentCode(e.target.value)}\r\n              margin=\"normal\"\r\n              required\r\n              error={!documentCode.trim() && documentCode.length > 0}\r\n              helperText={!documentCode.trim() && documentCode.length > 0 ? \"Document code is required\" : \"\"}\r\n            />\r\n\r\n            <TextField\r\n              select\r\n              fullWidth\r\n              label=\"Document Type\"\r\n              value={selectedType}\r\n              onChange={handleTypeChange}\r\n              margin=\"normal\"\r\n              required\r\n              error={!selectedType}\r\n              helperText={!selectedType ? \"Please select a document type\" : \"\"}\r\n            >\r\n              {documentTypes.map((type) => (\r\n                <MenuItem key={type.id} value={type.id}>\r\n                  {type.name}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n            \r\n            {/* Dynamic fields for document type */}\r\n            {selectedDocumentType && selectedDocumentType.fields.map((field) => (\r\n              <TextField\r\n                key={field.fieldKey}\r\n                label={field.name + (field.required ? ' *' : '')}\r\n                fullWidth\r\n                margin=\"normal\"\r\n                type={field.fieldType === 'NUMBER' ? 'number' : \r\n                      field.fieldType === 'DATE' ? 'date' : \r\n                      field.fieldType === 'EMAIL' ? 'email' : 'text'}\r\n                multiline={field.fieldType === 'TEXTAREA'}\r\n                rows={field.fieldType === 'TEXTAREA' ? 3 : 1}\r\n                select={field.fieldType === 'SELECT'}\r\n                value={docFields[field.fieldKey] || field.defaultValue || ''}\r\n                onChange={(e) => handleFieldChange(field.fieldKey, e.target.value)}\r\n                required={field.required}\r\n                helperText={field.description}\r\n                InputLabelProps={field.fieldType === 'DATE' ? { shrink: true } : undefined}\r\n              >\r\n                {field.fieldType === 'SELECT' && field.options?.map((option) => (\r\n                  <MenuItem key={option} value={option}>\r\n                    {option}\r\n                  </MenuItem>\r\n                ))}\r\n              </TextField>\r\n            ))}\r\n            \r\n            {/* Physical Storage Fields */}\r\n            <Typography variant=\"h6\" sx={{ mt: 3, mb: 1 }}>Physical Storage</Typography>\r\n            <Grid container spacing={2} sx={{ mb: 2 }}>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"Room\"\r\n                  value={physicalStorage.room}\r\n                  onChange={(e) => handlePhysicalStorageChange('room', e.target.value)}\r\n                  margin=\"normal\"\r\n                  required\r\n                  error={!physicalStorage.room.trim()}\r\n                  helperText={!physicalStorage.room.trim() ? \"Room is required\" : \"\"}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"Cupboard\"\r\n                  value={physicalStorage.cupboard}\r\n                  onChange={(e) => handlePhysicalStorageChange('cupboard', e.target.value)}\r\n                  margin=\"normal\"\r\n                  required\r\n                  error={!physicalStorage.cupboard.trim()}\r\n                  helperText={!physicalStorage.cupboard.trim() ? \"Cupboard is required\" : \"\"}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"Drawer\"\r\n                  value={physicalStorage.drawer}\r\n                  onChange={(e) => handlePhysicalStorageChange('drawer', e.target.value)}\r\n                  margin=\"normal\"\r\n                  required\r\n                  error={!physicalStorage.drawer.trim()}\r\n                  helperText={!physicalStorage.drawer.trim() ? \"Drawer is required\" : \"\"}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"File Number\"\r\n                  value={physicalStorage.fileNumber}\r\n                  onChange={(e) => handlePhysicalStorageChange('fileNumber', e.target.value)}\r\n                  margin=\"normal\"\r\n                  required\r\n                  error={!physicalStorage.fileNumber.trim()}\r\n                  helperText={!physicalStorage.fileNumber.trim() ? \"File number is required\" : \"\"}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"File Color\"\r\n                  value={physicalStorage.fileColor}\r\n                  onChange={(e) => handlePhysicalStorageChange('fileColor', e.target.value)}\r\n                  margin=\"normal\"\r\n                  required\r\n                  error={!physicalStorage.fileColor.trim()}\r\n                  helperText={!physicalStorage.fileColor.trim() ? \"File color is required\" : \"\"}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"Document Number\"\r\n                  value={physicalStorage.documentNumber}\r\n                  onChange={(e) => handlePhysicalStorageChange('documentNumber', e.target.value)}\r\n                  margin=\"normal\"\r\n                  required\r\n                  error={!physicalStorage.documentNumber.trim()}\r\n                  helperText={!physicalStorage.documentNumber.trim() ? \"Document number is required\" : \"\"}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"File Section\"\r\n                  value={physicalStorage.fileSection}\r\n                  onChange={(e) => handlePhysicalStorageChange('fileSection', e.target.value)}\r\n                  margin=\"normal\"\r\n                  required\r\n                  error={!physicalStorage.fileSection.trim()}\r\n                  helperText={!physicalStorage.fileSection.trim() ? \"File section is required\" : \"\"}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"Section Color\"\r\n                  value={physicalStorage.sectionColor}\r\n                  onChange={(e) => handlePhysicalStorageChange('sectionColor', e.target.value)}\r\n                  margin=\"normal\"\r\n                  required\r\n                  error={!physicalStorage.sectionColor.trim()}\r\n                  helperText={!physicalStorage.sectionColor.trim() ? \"Section color is required\" : \"\"}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <input\r\n              accept=\"*/*\"\r\n              style={{ display: \"none\" }}\r\n              id=\"attachment-input\"\r\n              type=\"file\"\r\n              onChange={handleFileChange}\r\n            />\r\n            <label htmlFor=\"attachment-input\">\r\n              <Button\r\n                variant=\"outlined\"\r\n                component=\"span\"\r\n                fullWidth\r\n                sx={{ mt: 2 }}\r\n              >\r\n                {attachment ? `Selected: ${attachment.name}` : \"Select File (Optional)\"}\r\n              </Button>\r\n            </label>\r\n            \r\n            {attachment && (\r\n              <Box sx={{ mt: 1 }}>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  File: {attachment.name} ({(attachment.size / 1024 / 1024).toFixed(2)} MB)\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n            \r\n            <Box sx={{ display: \"flex\", gap: 2, mt: 3 }}>\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => {\r\n                  setOpenUpload(false);\r\n                  resetUploadForm();\r\n                }}\r\n                fullWidth\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                disabled={!selectedType || !documentName.trim() || !documentCode.trim() || uploadLoading}\r\n                fullWidth\r\n                sx={{\r\n                  bgcolor: tokens.primary.main,\r\n                  \"&:hover\": { bgcolor: tokens.primary.dark },\r\n                }}\r\n              >\r\n                {uploadLoading ? <CircularProgress size={20} /> : \"Upload\"}\r\n              </Button>\r\n            </Box>\r\n          </form>\r\n        </Box>\r\n      </Modal>\r\n\r\n      {/* View Document Modal */}\r\n      <Modal\r\n        open={!!viewDoc}\r\n        onClose={handleCloseViewDoc}\r\n        aria-labelledby=\"view-document-modal\"\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: 500,\r\n            bgcolor: \"background.paper\",\r\n            boxShadow: 24,\r\n            p: 4,\r\n            borderRadius: 2,\r\n            maxHeight: '90vh',\r\n            overflow: 'auto',\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              mb: 2,\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" component=\"h2\">\r\n              {viewDoc?.name}\r\n            </Typography>\r\n            <IconButton onClick={handleCloseViewDoc} size=\"small\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Box>\r\n          \r\n          {viewDoc && (\r\n            <Box>\r\n              <Typography variant=\"subtitle1\" sx={{ mb: 2 }}>\r\n                <strong>Document Type:</strong> {viewDoc.documentTypeName}\r\n              </Typography>\r\n              \r\n              {viewDoc.metadata && Object.entries(viewDoc.metadata).map(([key, value]) => (\r\n                <Typography key={key} variant=\"body2\" sx={{ mb: 1 }}>\r\n                  <strong>{key}:</strong> {value?.toString()}\r\n                </Typography>\r\n              ))}\r\n              \r\n              <Box sx={{ mt: 2, pt: 2, borderTop: 1, borderColor: 'divider' }}>\r\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n                  <strong>File:</strong> {viewDoc.filePath || 'No file attached'}\r\n                </Typography>\r\n                {viewDoc.fileSize && (\r\n                  <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n                    <strong>Size:</strong> {(viewDoc.fileSize / 1024 / 1024).toFixed(2)} MB\r\n                  </Typography>\r\n                )}\r\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n                  <strong>Status:</strong> {viewDoc.status}\r\n                </Typography>\r\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n                  <strong>Created:</strong> {viewDoc.createdAt ? new Date(viewDoc.createdAt).toLocaleString() : 'Unknown'}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n        </Box>\r\n      </Modal>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ArchivalPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}