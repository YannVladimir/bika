{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\bika\\\\bika\\\\frontend\\\\src\\\\pages\\\\Archival\\\\ArchivalPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Box, Typography, Button, Paper, Grid, Breadcrumbs, Link, Modal, TextField, MenuItem, IconButton, Alert, CircularProgress } from \"@mui/material\";\nimport { Add as AddIcon, Close as CloseIcon, Folder as FolderIcon, InsertDriveFile as FileIcon, CreateNewFolder as NewFolderIcon } from \"@mui/icons-material\";\nimport { tokens } from \"../../theme/theme\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { folderService, documentService, documentTypeService } from \"../../services/api\";\n\n// Helper function to find folder by path\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst findFolderByPath = (folders, path) => {\n  if (path.length === 0) return undefined;\n  for (const folder of folders) {\n    if (folder.name === path[0]) {\n      if (path.length === 1) return folder;\n      if (folder.children) {\n        return findFolderByPath(folder.children, path.slice(1));\n      }\n    }\n  }\n  return undefined;\n};\nconst ArchivalPage = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n\n  // State for folders and navigation\n  const [folders, setFolders] = useState([]);\n  const [currentPath, setCurrentPath] = useState([]);\n  const [currentFolder, setCurrentFolder] = useState(null);\n\n  // State for document types\n  const [documentTypes, setDocumentTypes] = useState([]);\n\n  // Modal states\n  const [openUpload, setOpenUpload] = useState(false);\n  const [openNewFolder, setOpenNewFolder] = useState(false);\n  const [viewDoc, setViewDoc] = useState(null);\n\n  // Form states\n  const [selectedType, setSelectedType] = useState(\"\");\n  const [attachment, setAttachment] = useState(null);\n  const [docFields, setDocFields] = useState({});\n  const [newFolderName, setNewFolderName] = useState(\"\");\n  const [newFolderDescription, setNewFolderDescription] = useState(\"\");\n  const [documentName, setDocumentName] = useState(\"\");\n  const [documentCode, setDocumentCode] = useState(\"\");\n\n  // Loading and error states\n  const [loading, setLoading] = useState(true);\n  const [uploadLoading, setUploadLoading] = useState(false);\n  const [folderLoading, setFolderLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Load initial data\n  useEffect(() => {\n    const loadInitialData = async () => {\n      if (!(user !== null && user !== void 0 && user.companyId)) return;\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Load root folders and document types in parallel\n        const [foldersData, documentTypesData] = await Promise.all([folderService.getRootFoldersByCompany(user.companyId), documentTypeService.getDocumentTypesByCompany(user.companyId)]);\n        setFolders(foldersData);\n        setDocumentTypes(documentTypesData);\n      } catch (err) {\n        console.error('Error loading data:', err);\n        setError('Failed to load folders and document types');\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadInitialData();\n  }, [user === null || user === void 0 ? void 0 : user.companyId]);\n\n  // Update current folder when path changes\n  useEffect(() => {\n    if (currentPath.length === 0) {\n      setCurrentFolder(null);\n    } else {\n      const folder = findFolderByPath(folders, currentPath);\n      setCurrentFolder(folder || null);\n    }\n  }, [currentPath, folders]);\n\n  // Helper function to reset upload form\n  const resetUploadForm = () => {\n    setSelectedType(\"\");\n    setDocFields({});\n    setAttachment(null);\n    setDocumentName(\"\");\n    setDocumentCode(\"\");\n  };\n\n  // Folder navigation\n  const handleFolderClick = async folder => {\n    try {\n      setLoading(true);\n      // Get folder contents including documents\n      const folderWithContents = await folderService.getFolderContents(folder.id);\n\n      // Update the folder in our state with the new contents\n      const updateFolderInTree = (folders, targetId, newData) => {\n        return folders.map(f => {\n          if (f.id === targetId) {\n            return {\n              ...f,\n              ...newData\n            };\n          }\n          if (f.children) {\n            return {\n              ...f,\n              children: updateFolderInTree(f.children, targetId, newData)\n            };\n          }\n          return f;\n        });\n      };\n      setFolders(prev => updateFolderInTree(prev, folder.id, folderWithContents));\n      setCurrentPath([...currentPath, folder.name]);\n    } catch (err) {\n      console.error('Error loading folder contents:', err);\n      setError('Failed to load folder contents');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleBack = idx => {\n    if (typeof idx === \"number\") {\n      setCurrentPath(currentPath.slice(0, idx + 1));\n    } else {\n      setCurrentPath([]);\n    }\n  };\n\n  // Create new folder\n  const handleCreateFolder = async () => {\n    if (!newFolderName.trim() || !(user !== null && user !== void 0 && user.companyId)) return;\n    try {\n      setFolderLoading(true);\n      setError(null);\n      const folderRequest = {\n        name: newFolderName,\n        description: newFolderDescription,\n        companyId: user.companyId,\n        departmentId: user.departmentId,\n        parentId: currentFolder === null || currentFolder === void 0 ? void 0 : currentFolder.id\n      };\n      const newFolder = await folderService.createFolder(folderRequest);\n\n      // Add the new folder to the appropriate location in our state\n      if (currentPath.length === 0) {\n        // Adding to root\n        setFolders(prev => [...prev, newFolder]);\n      } else {\n        // Adding to current folder\n        const updateFolderChildren = (folders, path, newChild) => {\n          if (path.length === 0) return folders;\n          return folders.map(f => {\n            if (f.name === path[0]) {\n              if (path.length === 1) {\n                return {\n                  ...f,\n                  children: [...(f.children || []), newChild]\n                };\n              }\n              if (f.children) {\n                return {\n                  ...f,\n                  children: updateFolderChildren(f.children, path.slice(1), newChild)\n                };\n              }\n            }\n            return f;\n          });\n        };\n        setFolders(prev => updateFolderChildren(prev, currentPath, newFolder));\n      }\n      setNewFolderName(\"\");\n      setNewFolderDescription(\"\");\n      setOpenNewFolder(false);\n    } catch (err) {\n      console.error('Error creating folder:', err);\n      setError('Failed to create folder');\n    } finally {\n      setFolderLoading(false);\n    }\n  };\n\n  // Document upload\n  const handleTypeChange = event => {\n    const typeId = event.target.value === \"\" ? \"\" : Number(event.target.value);\n    setSelectedType(typeId);\n    setDocFields({});\n\n    // Set default document name and code from the document type\n    if (typeof typeId === 'number') {\n      const docType = documentTypes.find(t => t.id === typeId);\n      if (docType) {\n        const defaultName = `New ${docType.name}`;\n        const timestamp = Date.now();\n        const defaultCode = `${docType.code}_${timestamp}`;\n        setDocumentName(defaultName);\n        setDocumentCode(defaultCode);\n      }\n    } else {\n      setDocumentName(\"\");\n      setDocumentCode(\"\");\n    }\n  };\n  const handleFieldChange = (fieldKey, value) => {\n    setDocFields(prev => ({\n      ...prev,\n      [fieldKey]: value\n    }));\n  };\n  const handleFileChange = event => {\n    if (event.target.files && event.target.files[0]) {\n      setAttachment(event.target.files[0]);\n    }\n  };\n  const handleUpload = async event => {\n    event.preventDefault();\n    if (!selectedType || !(user !== null && user !== void 0 && user.companyId) || !documentName.trim() || !documentCode.trim()) return;\n    try {\n      setUploadLoading(true);\n      setError(null);\n\n      // Create document request with user-provided code\n      let documentRequest = {\n        name: documentName,\n        code: documentCode,\n        documentTypeId: selectedType,\n        companyId: user.companyId,\n        departmentId: user.departmentId,\n        folderId: currentFolder === null || currentFolder === void 0 ? void 0 : currentFolder.id,\n        fieldValues: docFields,\n        status: 'ACTIVE'\n      };\n\n      // Add file information if attachment is provided\n      if (attachment) {\n        documentRequest = documentService.prepareDocumentForUpload(documentRequest, attachment);\n      }\n      const newDocument = await documentService.createDocument(documentRequest);\n\n      // Add the document to the current folder's documents\n      if (currentFolder) {\n        setFolders(prev => {\n          const updateFolderDocuments = (folders, path, newDoc) => {\n            if (path.length === 0) return folders;\n            return folders.map(f => {\n              if (f.name === path[0]) {\n                if (path.length === 1) {\n                  return {\n                    ...f,\n                    documents: [...(f.documents || []), newDoc]\n                  };\n                }\n                if (f.children) {\n                  return {\n                    ...f,\n                    children: updateFolderDocuments(f.children, path.slice(1), newDoc)\n                  };\n                }\n              }\n              return f;\n            });\n          };\n          return updateFolderDocuments(prev, currentPath, newDocument);\n        });\n      }\n\n      // Reset form\n      setOpenUpload(false);\n      resetUploadForm();\n    } catch (err) {\n      console.error('Error uploading document:', err);\n      setError('Failed to upload document');\n    } finally {\n      setUploadLoading(false);\n    }\n  };\n\n  // View document\n  const handleViewDoc = doc => setViewDoc(doc);\n  const handleCloseViewDoc = () => setViewDoc(null);\n\n  // Get current folder data for display\n  const getCurrentFolderData = () => {\n    if (currentPath.length === 0) {\n      return {\n        folders,\n        documents: []\n      };\n    }\n    const folder = findFolderByPath(folders, currentPath);\n    return {\n      folders: (folder === null || folder === void 0 ? void 0 : folder.children) || [],\n      documents: (folder === null || folder === void 0 ? void 0 : folder.documents) || []\n    };\n  };\n  const {\n    folders: currentFolders,\n    documents: currentDocuments\n  } = getCurrentFolderData();\n  const selectedDocumentType = documentTypes.find(dt => dt.id === selectedType);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      minHeight: \"400px\",\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    p: 3,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      fontWeight: 600,\n      mb: 4,\n      children: \"Document Archival\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      onClose: () => setError(null),\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Breadcrumbs, {\n      sx: {\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        component: \"button\",\n        variant: \"body1\",\n        onClick: () => handleBack(),\n        sx: {\n          color: tokens.primary.main\n        },\n        children: \"Archival\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), currentPath.map((name, idx) => /*#__PURE__*/_jsxDEV(Link, {\n        component: \"button\",\n        variant: \"body1\",\n        onClick: () => handleBack(idx),\n        sx: {\n          color: tokens.primary.main\n        },\n        children: name\n      }, `${name}-${idx}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        gap: 2,\n        justifyContent: \"flex-end\",\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        startIcon: /*#__PURE__*/_jsxDEV(NewFolderIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 22\n        }, this),\n        onClick: () => setOpenNewFolder(true),\n        disabled: loading,\n        children: \"New Folder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 22\n        }, this),\n        onClick: () => setOpenUpload(true),\n        disabled: loading || documentTypes.length === 0,\n        sx: {\n          bgcolor: tokens.primary.main,\n          \"&:hover\": {\n            bgcolor: tokens.primary.dark\n          }\n        },\n        children: \"Upload Document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 0,\n      sx: {\n        p: 2,\n        backgroundColor: tokens.grey[100],\n        borderRadius: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [currentFolders.map(folder => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 0,\n            sx: {\n              p: 2,\n              cursor: \"pointer\",\n              \"&:hover\": {\n                backgroundColor: tokens.grey[200]\n              }\n            },\n            onClick: () => handleFolderClick(folder),\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: 2,\n              children: [/*#__PURE__*/_jsxDEV(FolderIcon, {\n                sx: {\n                  color: tokens.secondary.main\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  children: folder.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 21\n                }, this), folder.description && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: folder.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this)\n        }, folder.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this)), currentDocuments.map(doc => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 0,\n            sx: {\n              p: 2,\n              cursor: \"pointer\",\n              \"&:hover\": {\n                backgroundColor: tokens.grey[200]\n              }\n            },\n            onClick: () => handleViewDoc(doc),\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: 2,\n              children: [/*#__PURE__*/_jsxDEV(FileIcon, {\n                sx: {\n                  color: tokens.primary.main\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  children: doc.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: doc.documentTypeName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 21\n                }, this), doc.fileSize && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: [(doc.fileSize / 1024 / 1024).toFixed(2), \" MB\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 15\n          }, this)\n        }, doc.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this), currentFolders.length === 0 && currentDocuments.length === 0 && /*#__PURE__*/_jsxDEV(Box, {\n        textAlign: \"center\",\n        py: 4,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"text.secondary\",\n          children: \"No folders or documents found. Create a folder or upload a document to get started.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: openNewFolder,\n      onClose: () => setOpenNewFolder(false),\n      \"aria-labelledby\": \"new-folder-modal\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          width: 400,\n          bgcolor: \"background.paper\",\n          boxShadow: 24,\n          p: 4,\n          borderRadius: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"Create New Folder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: () => setOpenNewFolder(false),\n            size: \"small\",\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Folder Name\",\n          value: newFolderName,\n          onChange: e => setNewFolderName(e.target.value),\n          margin: \"normal\",\n          required: true,\n          error: !newFolderName.trim() && newFolderName.length > 0,\n          helperText: !newFolderName.trim() && newFolderName.length > 0 ? \"Folder name is required\" : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Description (Optional)\",\n          value: newFolderDescription,\n          onChange: e => setNewFolderDescription(e.target.value),\n          margin: \"normal\",\n          multiline: true,\n          rows: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            gap: 2,\n            mt: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            onClick: () => setOpenNewFolder(false),\n            fullWidth: true,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: handleCreateFolder,\n            disabled: !newFolderName.trim() || folderLoading,\n            fullWidth: true,\n            sx: {\n              bgcolor: tokens.primary.main,\n              \"&:hover\": {\n                bgcolor: tokens.primary.dark\n              }\n            },\n            children: folderLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 32\n            }, this) : \"Create\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: openUpload,\n      onClose: () => {\n        setOpenUpload(false);\n        resetUploadForm();\n      },\n      \"aria-labelledby\": \"upload-document-modal\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          width: 500,\n          bgcolor: \"background.paper\",\n          boxShadow: 24,\n          p: 4,\n          borderRadius: 2,\n          maxHeight: '90vh',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h2\",\n            children: \"Upload Document\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: () => {\n              setOpenUpload(false);\n              resetUploadForm();\n            },\n            size: \"small\",\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleUpload,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Document Name\",\n            value: documentName,\n            onChange: e => setDocumentName(e.target.value),\n            margin: \"normal\",\n            required: true,\n            error: !documentName.trim() && documentName.length > 0,\n            helperText: !documentName.trim() && documentName.length > 0 ? \"Document name is required\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Document Code\",\n            value: documentCode,\n            onChange: e => setDocumentCode(e.target.value),\n            margin: \"normal\",\n            required: true,\n            error: !documentCode.trim() && documentCode.length > 0,\n            helperText: !documentCode.trim() && documentCode.length > 0 ? \"Document code is required\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            select: true,\n            fullWidth: true,\n            label: \"Document Type\",\n            value: selectedType,\n            onChange: handleTypeChange,\n            margin: \"normal\",\n            required: true,\n            error: !selectedType,\n            helperText: !selectedType ? \"Please select a document type\" : \"\",\n            children: documentTypes.map(type => /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: type.id,\n              children: type.name\n            }, type.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 13\n          }, this), selectedDocumentType && selectedDocumentType.fields.map(field => {\n            var _field$options;\n            return /*#__PURE__*/_jsxDEV(TextField, {\n              label: field.name + (field.required ? ' *' : ''),\n              fullWidth: true,\n              margin: \"normal\",\n              type: field.fieldType === 'NUMBER' ? 'number' : field.fieldType === 'DATE' ? 'date' : field.fieldType === 'EMAIL' ? 'email' : 'text',\n              multiline: field.fieldType === 'TEXTAREA',\n              rows: field.fieldType === 'TEXTAREA' ? 3 : 1,\n              select: field.fieldType === 'SELECT',\n              value: docFields[field.fieldKey] || field.defaultValue || '',\n              onChange: e => handleFieldChange(field.fieldKey, e.target.value),\n              required: field.required,\n              helperText: field.description,\n              InputLabelProps: field.fieldType === 'DATE' ? {\n                shrink: true\n              } : undefined,\n              children: field.fieldType === 'SELECT' && ((_field$options = field.options) === null || _field$options === void 0 ? void 0 : _field$options.map(option => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: option,\n                children: option\n              }, option, false, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 19\n              }, this)))\n            }, field.fieldKey, false, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 15\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(\"input\", {\n            accept: \"*/*\",\n            style: {\n              display: \"none\"\n            },\n            id: \"attachment-input\",\n            type: \"file\",\n            onChange: handleFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"attachment-input\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              component: \"span\",\n              fullWidth: true,\n              sx: {\n                mt: 2\n              },\n              children: attachment ? `Selected: ${attachment.name}` : \"Select File (Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 676,\n            columnNumber: 13\n          }, this), attachment && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              children: [\"File: \", attachment.name, \" (\", (attachment.size / 1024 / 1024).toFixed(2), \" MB)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: \"flex\",\n              gap: 2,\n              mt: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              onClick: () => {\n                setOpenUpload(false);\n                resetUploadForm();\n              },\n              fullWidth: true,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              variant: \"contained\",\n              disabled: !selectedType || !documentName.trim() || !documentCode.trim() || uploadLoading,\n              fullWidth: true,\n              sx: {\n                bgcolor: tokens.primary.main,\n                \"&:hover\": {\n                  bgcolor: tokens.primary.dark\n                }\n              },\n              children: uploadLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 716,\n                columnNumber: 34\n              }, this) : \"Upload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 706,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 695,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!viewDoc,\n      onClose: handleCloseViewDoc,\n      \"aria-labelledby\": \"view-document-modal\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          width: 500,\n          bgcolor: \"background.paper\",\n          boxShadow: 24,\n          p: 4,\n          borderRadius: 2,\n          maxHeight: '90vh',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h2\",\n            children: viewDoc === null || viewDoc === void 0 ? void 0 : viewDoc.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleCloseViewDoc,\n            size: \"small\",\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 11\n        }, this), viewDoc && /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            sx: {\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Document Type:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 763,\n              columnNumber: 17\n            }, this), \" \", viewDoc.documentTypeName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 762,\n            columnNumber: 15\n          }, this), viewDoc.metadata && Object.entries(viewDoc.metadata).map(([key, value]) => /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            sx: {\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [key, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 768,\n              columnNumber: 19\n            }, this), \" \", value === null || value === void 0 ? void 0 : value.toString()]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 767,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 2,\n              pt: 2,\n              borderTop: 1,\n              borderColor: 'divider'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"File:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 774,\n                columnNumber: 19\n              }, this), \" \", viewDoc.filePath || 'No file attached']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 773,\n              columnNumber: 17\n            }, this), viewDoc.fileSize && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Size:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 21\n              }, this), \" \", (viewDoc.fileSize / 1024 / 1024).toFixed(2), \" MB\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 782,\n                columnNumber: 19\n              }, this), \" \", viewDoc.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 781,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Created:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 785,\n                columnNumber: 19\n              }, this), \" \", viewDoc.createdAt ? new Date(viewDoc.createdAt).toLocaleString() : 'Unknown']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 772,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 729,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 724,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 346,\n    columnNumber: 5\n  }, this);\n};\n_s(ArchivalPage, \"vgn/nsOYnId/ukYDpp+G0F3pT0s=\", false, function () {\n  return [useAuth];\n});\n_c = ArchivalPage;\nexport default ArchivalPage;\nvar _c;\n$RefreshReg$(_c, \"ArchivalPage\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Button","Paper","Grid","Breadcrumbs","Link","Modal","TextField","MenuItem","IconButton","Alert","CircularProgress","Add","AddIcon","Close","CloseIcon","Folder","FolderIcon","InsertDriveFile","FileIcon","CreateNewFolder","NewFolderIcon","tokens","useAuth","folderService","documentService","documentTypeService","jsxDEV","_jsxDEV","findFolderByPath","folders","path","length","undefined","folder","name","children","slice","ArchivalPage","_s","user","setFolders","currentPath","setCurrentPath","currentFolder","setCurrentFolder","documentTypes","setDocumentTypes","openUpload","setOpenUpload","openNewFolder","setOpenNewFolder","viewDoc","setViewDoc","selectedType","setSelectedType","attachment","setAttachment","docFields","setDocFields","newFolderName","setNewFolderName","newFolderDescription","setNewFolderDescription","documentName","setDocumentName","documentCode","setDocumentCode","loading","setLoading","uploadLoading","setUploadLoading","folderLoading","setFolderLoading","error","setError","loadInitialData","companyId","foldersData","documentTypesData","Promise","all","getRootFoldersByCompany","getDocumentTypesByCompany","err","console","resetUploadForm","handleFolderClick","folderWithContents","getFolderContents","id","updateFolderInTree","targetId","newData","map","f","prev","handleBack","idx","handleCreateFolder","trim","folderRequest","description","departmentId","parentId","newFolder","createFolder","updateFolderChildren","newChild","handleTypeChange","event","typeId","target","value","Number","docType","find","t","defaultName","timestamp","Date","now","defaultCode","code","handleFieldChange","fieldKey","handleFileChange","files","handleUpload","preventDefault","documentRequest","documentTypeId","folderId","fieldValues","status","prepareDocumentForUpload","newDocument","createDocument","updateFolderDocuments","newDoc","documents","handleViewDoc","doc","handleCloseViewDoc","getCurrentFolderData","currentFolders","currentDocuments","selectedDocumentType","dt","display","justifyContent","alignItems","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","width","boxSizing","p","variant","fontWeight","mb","severity","sx","onClose","component","onClick","color","primary","main","gap","startIcon","disabled","bgcolor","dark","elevation","backgroundColor","grey","borderRadius","container","spacing","item","xs","sm","md","cursor","secondary","documentTypeName","fileSize","toFixed","textAlign","py","open","position","top","left","transform","boxShadow","size","fullWidth","label","onChange","e","margin","required","helperText","multiline","rows","mt","maxHeight","overflow","onSubmit","select","type","fields","field","_field$options","fieldType","defaultValue","InputLabelProps","shrink","options","option","accept","style","htmlFor","metadata","Object","entries","key","toString","pt","borderTop","borderColor","filePath","createdAt","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/bika/bika/frontend/src/pages/Archival/ArchivalPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Paper,\r\n  Grid,\r\n  Breadcrumbs,\r\n  Link,\r\n  Modal,\r\n  TextField,\r\n  MenuItem,\r\n  IconButton,\r\n  Alert,\r\n  CircularProgress,\r\n  FormHelperText,\r\n} from \"@mui/material\";\r\nimport {\r\n  Add as AddIcon,\r\n  Close as CloseIcon,\r\n  Folder as FolderIcon,\r\n  InsertDriveFile as FileIcon,\r\n  CreateNewFolder as NewFolderIcon,\r\n} from \"@mui/icons-material\";\r\nimport { tokens } from \"../../theme/theme\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { \r\n  folderService, \r\n  documentService, \r\n  documentTypeService,\r\n  Folder, \r\n  Document, \r\n  DocumentType, \r\n  CreateFolderRequest, \r\n  CreateDocumentRequest \r\n} from \"../../services/api\";\r\n\r\n// Helper function to find folder by path\r\nconst findFolderByPath = (folders: Folder[], path: string[]): Folder | undefined => {\r\n  if (path.length === 0) return undefined;\r\n  \r\n  for (const folder of folders) {\r\n    if (folder.name === path[0]) {\r\n      if (path.length === 1) return folder;\r\n      if (folder.children) {\r\n        return findFolderByPath(folder.children, path.slice(1));\r\n      }\r\n    }\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst ArchivalPage: React.FC = () => {\r\n  const { user } = useAuth();\r\n  \r\n  // State for folders and navigation\r\n  const [folders, setFolders] = useState<Folder[]>([]);\r\n  const [currentPath, setCurrentPath] = useState<string[]>([]);\r\n  const [currentFolder, setCurrentFolder] = useState<Folder | null>(null);\r\n  \r\n  // State for document types\r\n  const [documentTypes, setDocumentTypes] = useState<DocumentType[]>([]);\r\n  \r\n  // Modal states\r\n  const [openUpload, setOpenUpload] = useState(false);\r\n  const [openNewFolder, setOpenNewFolder] = useState(false);\r\n  const [viewDoc, setViewDoc] = useState<Document | null>(null);\r\n  \r\n  // Form states\r\n  const [selectedType, setSelectedType] = useState<number | \"\">(\"\");\r\n  const [attachment, setAttachment] = useState<File | null>(null);\r\n  const [docFields, setDocFields] = useState<{ [key: string]: any }>({});\r\n  const [newFolderName, setNewFolderName] = useState(\"\");\r\n  const [newFolderDescription, setNewFolderDescription] = useState(\"\");\r\n  const [documentName, setDocumentName] = useState(\"\");\r\n  const [documentCode, setDocumentCode] = useState(\"\");\r\n  \r\n  // Loading and error states\r\n  const [loading, setLoading] = useState(true);\r\n  const [uploadLoading, setUploadLoading] = useState(false);\r\n  const [folderLoading, setFolderLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Load initial data\r\n  useEffect(() => {\r\n    const loadInitialData = async () => {\r\n      if (!user?.companyId) return;\r\n      \r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        // Load root folders and document types in parallel\r\n        const [foldersData, documentTypesData] = await Promise.all([\r\n          folderService.getRootFoldersByCompany(user.companyId),\r\n          documentTypeService.getDocumentTypesByCompany(user.companyId)\r\n        ]);\r\n        \r\n        setFolders(foldersData);\r\n        setDocumentTypes(documentTypesData);\r\n      } catch (err) {\r\n        console.error('Error loading data:', err);\r\n        setError('Failed to load folders and document types');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadInitialData();\r\n  }, [user?.companyId]);\r\n\r\n  // Update current folder when path changes\r\n  useEffect(() => {\r\n    if (currentPath.length === 0) {\r\n      setCurrentFolder(null);\r\n    } else {\r\n      const folder = findFolderByPath(folders, currentPath);\r\n      setCurrentFolder(folder || null);\r\n    }\r\n  }, [currentPath, folders]);\r\n\r\n  // Helper function to reset upload form\r\n  const resetUploadForm = () => {\r\n    setSelectedType(\"\");\r\n    setDocFields({});\r\n    setAttachment(null);\r\n    setDocumentName(\"\");\r\n    setDocumentCode(\"\");\r\n  };\r\n\r\n  // Folder navigation\r\n  const handleFolderClick = async (folder: Folder) => {\r\n    try {\r\n      setLoading(true);\r\n      // Get folder contents including documents\r\n      const folderWithContents = await folderService.getFolderContents(folder.id);\r\n      \r\n      // Update the folder in our state with the new contents\r\n      const updateFolderInTree = (folders: Folder[], targetId: number, newData: Folder): Folder[] => {\r\n        return folders.map(f => {\r\n          if (f.id === targetId) {\r\n            return { ...f, ...newData };\r\n          }\r\n          if (f.children) {\r\n            return { ...f, children: updateFolderInTree(f.children, targetId, newData) };\r\n          }\r\n          return f;\r\n        });\r\n      };\r\n      \r\n      setFolders(prev => updateFolderInTree(prev, folder.id, folderWithContents));\r\n      setCurrentPath([...currentPath, folder.name]);\r\n    } catch (err) {\r\n      console.error('Error loading folder contents:', err);\r\n      setError('Failed to load folder contents');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleBack = (idx?: number) => {\r\n    if (typeof idx === \"number\") {\r\n      setCurrentPath(currentPath.slice(0, idx + 1));\r\n    } else {\r\n      setCurrentPath([]);\r\n    }\r\n  };\r\n\r\n  // Create new folder\r\n  const handleCreateFolder = async () => {\r\n    if (!newFolderName.trim() || !user?.companyId) return;\r\n    \r\n    try {\r\n      setFolderLoading(true);\r\n      setError(null);\r\n      \r\n      const folderRequest: CreateFolderRequest = {\r\n        name: newFolderName,\r\n        description: newFolderDescription,\r\n        companyId: user.companyId,\r\n        departmentId: user.departmentId,\r\n        parentId: currentFolder?.id,\r\n      };\r\n      \r\n      const newFolder = await folderService.createFolder(folderRequest);\r\n      \r\n      // Add the new folder to the appropriate location in our state\r\n      if (currentPath.length === 0) {\r\n        // Adding to root\r\n        setFolders(prev => [...prev, newFolder]);\r\n      } else {\r\n        // Adding to current folder\r\n        const updateFolderChildren = (folders: Folder[], path: string[], newChild: Folder): Folder[] => {\r\n          if (path.length === 0) return folders;\r\n          \r\n          return folders.map(f => {\r\n            if (f.name === path[0]) {\r\n              if (path.length === 1) {\r\n                return { ...f, children: [...(f.children || []), newChild] };\r\n              }\r\n              if (f.children) {\r\n                return { ...f, children: updateFolderChildren(f.children, path.slice(1), newChild) };\r\n              }\r\n            }\r\n            return f;\r\n          });\r\n        };\r\n        \r\n        setFolders(prev => updateFolderChildren(prev, currentPath, newFolder));\r\n      }\r\n      \r\n      setNewFolderName(\"\");\r\n      setNewFolderDescription(\"\");\r\n      setOpenNewFolder(false);\r\n    } catch (err) {\r\n      console.error('Error creating folder:', err);\r\n      setError('Failed to create folder');\r\n    } finally {\r\n      setFolderLoading(false);\r\n    }\r\n  };\r\n\r\n  // Document upload\r\n  const handleTypeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const typeId = event.target.value === \"\" ? \"\" : Number(event.target.value);\r\n    setSelectedType(typeId);\r\n    setDocFields({});\r\n    \r\n    // Set default document name and code from the document type\r\n    if (typeof typeId === 'number') {\r\n      const docType = documentTypes.find(t => t.id === typeId);\r\n      if (docType) {\r\n        const defaultName = `New ${docType.name}`;\r\n        const timestamp = Date.now();\r\n        const defaultCode = `${docType.code}_${timestamp}`;\r\n        \r\n        setDocumentName(defaultName);\r\n        setDocumentCode(defaultCode);\r\n      }\r\n    } else {\r\n      setDocumentName(\"\");\r\n      setDocumentCode(\"\");\r\n    }\r\n  };\r\n\r\n  const handleFieldChange = (fieldKey: string, value: any) => {\r\n    setDocFields(prev => ({ ...prev, [fieldKey]: value }));\r\n  };\r\n\r\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      setAttachment(event.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleUpload = async (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    if (!selectedType || !user?.companyId || !documentName.trim() || !documentCode.trim()) return;\r\n    \r\n    try {\r\n      setUploadLoading(true);\r\n      setError(null);\r\n      \r\n      // Create document request with user-provided code\r\n      let documentRequest: CreateDocumentRequest = {\r\n        name: documentName,\r\n        code: documentCode,\r\n        documentTypeId: selectedType as number,\r\n        companyId: user.companyId,\r\n        departmentId: user.departmentId,\r\n        folderId: currentFolder?.id,\r\n        fieldValues: docFields,\r\n        status: 'ACTIVE',\r\n      };\r\n      \r\n      // Add file information if attachment is provided\r\n      if (attachment) {\r\n        documentRequest = documentService.prepareDocumentForUpload(documentRequest, attachment);\r\n      }\r\n      \r\n      const newDocument = await documentService.createDocument(documentRequest);\r\n      \r\n      // Add the document to the current folder's documents\r\n      if (currentFolder) {\r\n        setFolders(prev => {\r\n          const updateFolderDocuments = (folders: Folder[], path: string[], newDoc: Document): Folder[] => {\r\n            if (path.length === 0) return folders;\r\n            \r\n            return folders.map(f => {\r\n              if (f.name === path[0]) {\r\n                if (path.length === 1) {\r\n                  return { ...f, documents: [...(f.documents || []), newDoc] };\r\n                }\r\n                if (f.children) {\r\n                  return { ...f, children: updateFolderDocuments(f.children, path.slice(1), newDoc) };\r\n                }\r\n              }\r\n              return f;\r\n            });\r\n          };\r\n          \r\n          return updateFolderDocuments(prev, currentPath, newDocument);\r\n        });\r\n      }\r\n      \r\n      // Reset form\r\n      setOpenUpload(false);\r\n      resetUploadForm();\r\n    } catch (err) {\r\n      console.error('Error uploading document:', err);\r\n      setError('Failed to upload document');\r\n    } finally {\r\n      setUploadLoading(false);\r\n    }\r\n  };\r\n\r\n  // View document\r\n  const handleViewDoc = (doc: Document) => setViewDoc(doc);\r\n  const handleCloseViewDoc = () => setViewDoc(null);\r\n\r\n  // Get current folder data for display\r\n  const getCurrentFolderData = () => {\r\n    if (currentPath.length === 0) {\r\n      return { folders, documents: [] };\r\n    }\r\n    \r\n    const folder = findFolderByPath(folders, currentPath);\r\n    return {\r\n      folders: folder?.children || [],\r\n      documents: folder?.documents || []\r\n    };\r\n  };\r\n\r\n  const { folders: currentFolders, documents: currentDocuments } = getCurrentFolderData();\r\n  const selectedDocumentType = documentTypes.find(dt => dt.id === selectedType);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box width=\"100%\" boxSizing=\"border-box\" p={3}>\r\n      <Typography variant=\"h4\" fontWeight={600} mb={4}>\r\n        Document Archival\r\n      </Typography>\r\n\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError(null)}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Breadcrumbs */}\r\n      <Breadcrumbs sx={{ mb: 2 }}>\r\n        <Link\r\n          component=\"button\"\r\n          variant=\"body1\"\r\n          onClick={() => handleBack()}\r\n          sx={{ color: tokens.primary.main }}\r\n        >\r\n          Archival\r\n        </Link>\r\n        {currentPath.map((name, idx) => (\r\n          <Link\r\n            key={`${name}-${idx}`}\r\n            component=\"button\"\r\n            variant=\"body1\"\r\n            onClick={() => handleBack(idx)}\r\n            sx={{ color: tokens.primary.main }}\r\n          >\r\n            {name}\r\n          </Link>\r\n        ))}\r\n      </Breadcrumbs>\r\n\r\n      {/* Action Buttons */}\r\n      <Box sx={{ display: \"flex\", gap: 2, justifyContent: \"flex-end\", mb: 2 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<NewFolderIcon />}\r\n          onClick={() => setOpenNewFolder(true)}\r\n          disabled={loading}\r\n        >\r\n          New Folder\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          startIcon={<AddIcon />}\r\n          onClick={() => setOpenUpload(true)}\r\n          disabled={loading || documentTypes.length === 0}\r\n          sx={{\r\n            bgcolor: tokens.primary.main,\r\n            \"&:hover\": { bgcolor: tokens.primary.dark },\r\n          }}\r\n        >\r\n          Upload Document\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* Folders and Documents Grid */}\r\n      <Paper\r\n        elevation={0}\r\n        sx={{ p: 2, backgroundColor: tokens.grey[100], borderRadius: 2 }}\r\n      >\r\n        <Grid container spacing={2}>\r\n          {currentFolders.map((folder) => (\r\n            <Grid item xs={12} sm={6} md={4} key={folder.id}>\r\n              <Paper\r\n                elevation={0}\r\n                sx={{\r\n                  p: 2,\r\n                  cursor: \"pointer\",\r\n                  \"&:hover\": { backgroundColor: tokens.grey[200] },\r\n                }}\r\n                onClick={() => handleFolderClick(folder)}\r\n              >\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                  <FolderIcon sx={{ color: tokens.secondary.main }} />\r\n                  <Box>\r\n                    <Typography>{folder.name}</Typography>\r\n                    {folder.description && (\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        {folder.description}\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n                </Box>\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n          \r\n          {currentDocuments.map((doc) => (\r\n            <Grid item xs={12} sm={6} md={4} key={doc.id}>\r\n              <Paper\r\n                elevation={0}\r\n                sx={{\r\n                  p: 2,\r\n                  cursor: \"pointer\",\r\n                  \"&:hover\": { backgroundColor: tokens.grey[200] },\r\n                }}\r\n                onClick={() => handleViewDoc(doc)}\r\n              >\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                  <FileIcon sx={{ color: tokens.primary.main }} />\r\n                  <Box>\r\n                    <Typography>{doc.name}</Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      {doc.documentTypeName}\r\n                    </Typography>\r\n                    {doc.fileSize && (\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        {(doc.fileSize / 1024 / 1024).toFixed(2)} MB\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n                </Box>\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        {currentFolders.length === 0 && currentDocuments.length === 0 && (\r\n          <Box textAlign=\"center\" py={4}>\r\n            <Typography color=\"text.secondary\">\r\n              No folders or documents found. Create a folder or upload a document to get started.\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* New Folder Dialog */}\r\n      <Modal\r\n        open={openNewFolder}\r\n        onClose={() => setOpenNewFolder(false)}\r\n        aria-labelledby=\"new-folder-modal\"\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: 400,\r\n            bgcolor: \"background.paper\",\r\n            boxShadow: 24,\r\n            p: 4,\r\n            borderRadius: 2,\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              mb: 2,\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" component=\"h2\">\r\n              Create New Folder\r\n            </Typography>\r\n            <IconButton onClick={() => setOpenNewFolder(false)} size=\"small\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Box>\r\n          \r\n          <TextField\r\n            fullWidth\r\n            label=\"Folder Name\"\r\n            value={newFolderName}\r\n            onChange={(e) => setNewFolderName(e.target.value)}\r\n            margin=\"normal\"\r\n            required\r\n            error={!newFolderName.trim() && newFolderName.length > 0}\r\n            helperText={!newFolderName.trim() && newFolderName.length > 0 ? \"Folder name is required\" : \"\"}\r\n          />\r\n          \r\n          <TextField\r\n            fullWidth\r\n            label=\"Description (Optional)\"\r\n            value={newFolderDescription}\r\n            onChange={(e) => setNewFolderDescription(e.target.value)}\r\n            margin=\"normal\"\r\n            multiline\r\n            rows={2}\r\n          />\r\n          \r\n          <Box sx={{ display: \"flex\", gap: 2, mt: 3 }}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={() => setOpenNewFolder(false)}\r\n              fullWidth\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleCreateFolder}\r\n              disabled={!newFolderName.trim() || folderLoading}\r\n              fullWidth\r\n              sx={{\r\n                bgcolor: tokens.primary.main,\r\n                \"&:hover\": { bgcolor: tokens.primary.dark },\r\n              }}\r\n            >\r\n              {folderLoading ? <CircularProgress size={20} /> : \"Create\"}\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </Modal>\r\n\r\n      {/* Upload Document Modal */}\r\n      <Modal\r\n        open={openUpload}\r\n        onClose={() => {\r\n          setOpenUpload(false);\r\n          resetUploadForm();\r\n        }}\r\n        aria-labelledby=\"upload-document-modal\"\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: 500,\r\n            bgcolor: \"background.paper\",\r\n            boxShadow: 24,\r\n            p: 4,\r\n            borderRadius: 2,\r\n            maxHeight: '90vh',\r\n            overflow: 'auto',\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              mb: 2,\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" component=\"h2\">\r\n              Upload Document\r\n            </Typography>\r\n            <IconButton \r\n              onClick={() => {\r\n                setOpenUpload(false);\r\n                resetUploadForm();\r\n              }} \r\n              size=\"small\"\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Box>\r\n          \r\n          <form onSubmit={handleUpload}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"Document Name\"\r\n              value={documentName}\r\n              onChange={(e) => setDocumentName(e.target.value)}\r\n              margin=\"normal\"\r\n              required\r\n              error={!documentName.trim() && documentName.length > 0}\r\n              helperText={!documentName.trim() && documentName.length > 0 ? \"Document name is required\" : \"\"}\r\n            />\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Document Code\"\r\n              value={documentCode}\r\n              onChange={(e) => setDocumentCode(e.target.value)}\r\n              margin=\"normal\"\r\n              required\r\n              error={!documentCode.trim() && documentCode.length > 0}\r\n              helperText={!documentCode.trim() && documentCode.length > 0 ? \"Document code is required\" : \"\"}\r\n            />\r\n\r\n            <TextField\r\n              select\r\n              fullWidth\r\n              label=\"Document Type\"\r\n              value={selectedType}\r\n              onChange={handleTypeChange}\r\n              margin=\"normal\"\r\n              required\r\n              error={!selectedType}\r\n              helperText={!selectedType ? \"Please select a document type\" : \"\"}\r\n            >\r\n              {documentTypes.map((type) => (\r\n                <MenuItem key={type.id} value={type.id}>\r\n                  {type.name}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n            \r\n            {/* Dynamic fields for document type */}\r\n            {selectedDocumentType && selectedDocumentType.fields.map((field) => (\r\n              <TextField\r\n                key={field.fieldKey}\r\n                label={field.name + (field.required ? ' *' : '')}\r\n                fullWidth\r\n                margin=\"normal\"\r\n                type={field.fieldType === 'NUMBER' ? 'number' : \r\n                      field.fieldType === 'DATE' ? 'date' : \r\n                      field.fieldType === 'EMAIL' ? 'email' : 'text'}\r\n                multiline={field.fieldType === 'TEXTAREA'}\r\n                rows={field.fieldType === 'TEXTAREA' ? 3 : 1}\r\n                select={field.fieldType === 'SELECT'}\r\n                value={docFields[field.fieldKey] || field.defaultValue || ''}\r\n                onChange={(e) => handleFieldChange(field.fieldKey, e.target.value)}\r\n                required={field.required}\r\n                helperText={field.description}\r\n                InputLabelProps={field.fieldType === 'DATE' ? { shrink: true } : undefined}\r\n              >\r\n                {field.fieldType === 'SELECT' && field.options?.map((option) => (\r\n                  <MenuItem key={option} value={option}>\r\n                    {option}\r\n                  </MenuItem>\r\n                ))}\r\n              </TextField>\r\n            ))}\r\n            \r\n            <input\r\n              accept=\"*/*\"\r\n              style={{ display: \"none\" }}\r\n              id=\"attachment-input\"\r\n              type=\"file\"\r\n              onChange={handleFileChange}\r\n            />\r\n            <label htmlFor=\"attachment-input\">\r\n              <Button\r\n                variant=\"outlined\"\r\n                component=\"span\"\r\n                fullWidth\r\n                sx={{ mt: 2 }}\r\n              >\r\n                {attachment ? `Selected: ${attachment.name}` : \"Select File (Optional)\"}\r\n              </Button>\r\n            </label>\r\n            \r\n            {attachment && (\r\n              <Box sx={{ mt: 1 }}>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  File: {attachment.name} ({(attachment.size / 1024 / 1024).toFixed(2)} MB)\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n            \r\n            <Box sx={{ display: \"flex\", gap: 2, mt: 3 }}>\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => {\r\n                  setOpenUpload(false);\r\n                  resetUploadForm();\r\n                }}\r\n                fullWidth\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                disabled={!selectedType || !documentName.trim() || !documentCode.trim() || uploadLoading}\r\n                fullWidth\r\n                sx={{\r\n                  bgcolor: tokens.primary.main,\r\n                  \"&:hover\": { bgcolor: tokens.primary.dark },\r\n                }}\r\n              >\r\n                {uploadLoading ? <CircularProgress size={20} /> : \"Upload\"}\r\n              </Button>\r\n            </Box>\r\n          </form>\r\n        </Box>\r\n      </Modal>\r\n\r\n      {/* View Document Modal */}\r\n      <Modal\r\n        open={!!viewDoc}\r\n        onClose={handleCloseViewDoc}\r\n        aria-labelledby=\"view-document-modal\"\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: 500,\r\n            bgcolor: \"background.paper\",\r\n            boxShadow: 24,\r\n            p: 4,\r\n            borderRadius: 2,\r\n            maxHeight: '90vh',\r\n            overflow: 'auto',\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              mb: 2,\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" component=\"h2\">\r\n              {viewDoc?.name}\r\n            </Typography>\r\n            <IconButton onClick={handleCloseViewDoc} size=\"small\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Box>\r\n          \r\n          {viewDoc && (\r\n            <Box>\r\n              <Typography variant=\"subtitle1\" sx={{ mb: 2 }}>\r\n                <strong>Document Type:</strong> {viewDoc.documentTypeName}\r\n              </Typography>\r\n              \r\n              {viewDoc.metadata && Object.entries(viewDoc.metadata).map(([key, value]) => (\r\n                <Typography key={key} variant=\"body2\" sx={{ mb: 1 }}>\r\n                  <strong>{key}:</strong> {value?.toString()}\r\n                </Typography>\r\n              ))}\r\n              \r\n              <Box sx={{ mt: 2, pt: 2, borderTop: 1, borderColor: 'divider' }}>\r\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n                  <strong>File:</strong> {viewDoc.filePath || 'No file attached'}\r\n                </Typography>\r\n                {viewDoc.fileSize && (\r\n                  <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n                    <strong>Size:</strong> {(viewDoc.fileSize / 1024 / 1024).toFixed(2)} MB\r\n                  </Typography>\r\n                )}\r\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n                  <strong>Status:</strong> {viewDoc.status}\r\n                </Typography>\r\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n                  <strong>Created:</strong> {viewDoc.createdAt ? new Date(viewDoc.createdAt).toLocaleString() : 'Unknown'}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n        </Box>\r\n      </Modal>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ArchivalPage;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,GAAG,EACHC,UAAU,EACVC,MAAM,EACNC,KAAK,EACLC,IAAI,EACJC,WAAW,EACXC,IAAI,EACJC,KAAK,EACLC,SAAS,EACTC,QAAQ,EACRC,UAAU,EACVC,KAAK,EACLC,gBAAgB,QAEX,eAAe;AACtB,SACEC,GAAG,IAAIC,OAAO,EACdC,KAAK,IAAIC,SAAS,EAClBC,MAAM,IAAIC,UAAU,EACpBC,eAAe,IAAIC,QAAQ,EAC3BC,eAAe,IAAIC,aAAa,QAC3B,qBAAqB;AAC5B,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,SAASC,OAAO,QAAQ,2BAA2B;AACnD,SACEC,aAAa,EACbC,eAAe,EACfC,mBAAmB,QAMd,oBAAoB;;AAE3B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,gBAAgB,GAAGA,CAACC,OAAiB,EAAEC,IAAc,KAAyB;EAClF,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE,OAAOC,SAAS;EAEvC,KAAK,MAAMC,MAAM,IAAIJ,OAAO,EAAE;IAC5B,IAAII,MAAM,CAACC,IAAI,KAAKJ,IAAI,CAAC,CAAC,CAAC,EAAE;MAC3B,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE,OAAOE,MAAM;MACpC,IAAIA,MAAM,CAACE,QAAQ,EAAE;QACnB,OAAOP,gBAAgB,CAACK,MAAM,CAACE,QAAQ,EAAEL,IAAI,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC;MACzD;IACF;EACF;EACA,OAAOJ,SAAS;AAClB,CAAC;AAED,MAAMK,YAAsB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAM;IAAEC;EAAK,CAAC,GAAGjB,OAAO,CAAC,CAAC;;EAE1B;EACA,MAAM,CAACO,OAAO,EAAEW,UAAU,CAAC,GAAG5C,QAAQ,CAAW,EAAE,CAAC;EACpD,MAAM,CAAC6C,WAAW,EAAEC,cAAc,CAAC,GAAG9C,QAAQ,CAAW,EAAE,CAAC;EAC5D,MAAM,CAAC+C,aAAa,EAAEC,gBAAgB,CAAC,GAAGhD,QAAQ,CAAgB,IAAI,CAAC;;EAEvE;EACA,MAAM,CAACiD,aAAa,EAAEC,gBAAgB,CAAC,GAAGlD,QAAQ,CAAiB,EAAE,CAAC;;EAEtE;EACA,MAAM,CAACmD,UAAU,EAAEC,aAAa,CAAC,GAAGpD,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACqD,aAAa,EAAEC,gBAAgB,CAAC,GAAGtD,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACuD,OAAO,EAAEC,UAAU,CAAC,GAAGxD,QAAQ,CAAkB,IAAI,CAAC;;EAE7D;EACA,MAAM,CAACyD,YAAY,EAAEC,eAAe,CAAC,GAAG1D,QAAQ,CAAc,EAAE,CAAC;EACjE,MAAM,CAAC2D,UAAU,EAAEC,aAAa,CAAC,GAAG5D,QAAQ,CAAc,IAAI,CAAC;EAC/D,MAAM,CAAC6D,SAAS,EAAEC,YAAY,CAAC,GAAG9D,QAAQ,CAAyB,CAAC,CAAC,CAAC;EACtE,MAAM,CAAC+D,aAAa,EAAEC,gBAAgB,CAAC,GAAGhE,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACiE,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGlE,QAAQ,CAAC,EAAE,CAAC;EACpE,MAAM,CAACmE,YAAY,EAAEC,eAAe,CAAC,GAAGpE,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACqE,YAAY,EAAEC,eAAe,CAAC,GAAGtE,QAAQ,CAAC,EAAE,CAAC;;EAEpD;EACA,MAAM,CAACuE,OAAO,EAAEC,UAAU,CAAC,GAAGxE,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACyE,aAAa,EAAEC,gBAAgB,CAAC,GAAG1E,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC2E,aAAa,EAAEC,gBAAgB,CAAC,GAAG5E,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC6E,KAAK,EAAEC,QAAQ,CAAC,GAAG9E,QAAQ,CAAgB,IAAI,CAAC;;EAEvD;EACAC,SAAS,CAAC,MAAM;IACd,MAAM8E,eAAe,GAAG,MAAAA,CAAA,KAAY;MAClC,IAAI,EAACpC,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEqC,SAAS,GAAE;MAEtB,IAAI;QACFR,UAAU,CAAC,IAAI,CAAC;QAChBM,QAAQ,CAAC,IAAI,CAAC;;QAEd;QACA,MAAM,CAACG,WAAW,EAAEC,iBAAiB,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACzDzD,aAAa,CAAC0D,uBAAuB,CAAC1C,IAAI,CAACqC,SAAS,CAAC,EACrDnD,mBAAmB,CAACyD,yBAAyB,CAAC3C,IAAI,CAACqC,SAAS,CAAC,CAC9D,CAAC;QAEFpC,UAAU,CAACqC,WAAW,CAAC;QACvB/B,gBAAgB,CAACgC,iBAAiB,CAAC;MACrC,CAAC,CAAC,OAAOK,GAAG,EAAE;QACZC,OAAO,CAACX,KAAK,CAAC,qBAAqB,EAAEU,GAAG,CAAC;QACzCT,QAAQ,CAAC,2CAA2C,CAAC;MACvD,CAAC,SAAS;QACRN,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDO,eAAe,CAAC,CAAC;EACnB,CAAC,EAAE,CAACpC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEqC,SAAS,CAAC,CAAC;;EAErB;EACA/E,SAAS,CAAC,MAAM;IACd,IAAI4C,WAAW,CAACV,MAAM,KAAK,CAAC,EAAE;MAC5Ba,gBAAgB,CAAC,IAAI,CAAC;IACxB,CAAC,MAAM;MACL,MAAMX,MAAM,GAAGL,gBAAgB,CAACC,OAAO,EAAEY,WAAW,CAAC;MACrDG,gBAAgB,CAACX,MAAM,IAAI,IAAI,CAAC;IAClC;EACF,CAAC,EAAE,CAACQ,WAAW,EAAEZ,OAAO,CAAC,CAAC;;EAE1B;EACA,MAAMwD,eAAe,GAAGA,CAAA,KAAM;IAC5B/B,eAAe,CAAC,EAAE,CAAC;IACnBI,YAAY,CAAC,CAAC,CAAC,CAAC;IAChBF,aAAa,CAAC,IAAI,CAAC;IACnBQ,eAAe,CAAC,EAAE,CAAC;IACnBE,eAAe,CAAC,EAAE,CAAC;EACrB,CAAC;;EAED;EACA,MAAMoB,iBAAiB,GAAG,MAAOrD,MAAc,IAAK;IAClD,IAAI;MACFmC,UAAU,CAAC,IAAI,CAAC;MAChB;MACA,MAAMmB,kBAAkB,GAAG,MAAMhE,aAAa,CAACiE,iBAAiB,CAACvD,MAAM,CAACwD,EAAE,CAAC;;MAE3E;MACA,MAAMC,kBAAkB,GAAGA,CAAC7D,OAAiB,EAAE8D,QAAgB,EAAEC,OAAe,KAAe;QAC7F,OAAO/D,OAAO,CAACgE,GAAG,CAACC,CAAC,IAAI;UACtB,IAAIA,CAAC,CAACL,EAAE,KAAKE,QAAQ,EAAE;YACrB,OAAO;cAAE,GAAGG,CAAC;cAAE,GAAGF;YAAQ,CAAC;UAC7B;UACA,IAAIE,CAAC,CAAC3D,QAAQ,EAAE;YACd,OAAO;cAAE,GAAG2D,CAAC;cAAE3D,QAAQ,EAAEuD,kBAAkB,CAACI,CAAC,CAAC3D,QAAQ,EAAEwD,QAAQ,EAAEC,OAAO;YAAE,CAAC;UAC9E;UACA,OAAOE,CAAC;QACV,CAAC,CAAC;MACJ,CAAC;MAEDtD,UAAU,CAACuD,IAAI,IAAIL,kBAAkB,CAACK,IAAI,EAAE9D,MAAM,CAACwD,EAAE,EAAEF,kBAAkB,CAAC,CAAC;MAC3E7C,cAAc,CAAC,CAAC,GAAGD,WAAW,EAAER,MAAM,CAACC,IAAI,CAAC,CAAC;IAC/C,CAAC,CAAC,OAAOiD,GAAG,EAAE;MACZC,OAAO,CAACX,KAAK,CAAC,gCAAgC,EAAEU,GAAG,CAAC;MACpDT,QAAQ,CAAC,gCAAgC,CAAC;IAC5C,CAAC,SAAS;MACRN,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM4B,UAAU,GAAIC,GAAY,IAAK;IACnC,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;MAC3BvD,cAAc,CAACD,WAAW,CAACL,KAAK,CAAC,CAAC,EAAE6D,GAAG,GAAG,CAAC,CAAC,CAAC;IAC/C,CAAC,MAAM;MACLvD,cAAc,CAAC,EAAE,CAAC;IACpB;EACF,CAAC;;EAED;EACA,MAAMwD,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrC,IAAI,CAACvC,aAAa,CAACwC,IAAI,CAAC,CAAC,IAAI,EAAC5D,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEqC,SAAS,GAAE;IAE/C,IAAI;MACFJ,gBAAgB,CAAC,IAAI,CAAC;MACtBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAM0B,aAAkC,GAAG;QACzClE,IAAI,EAAEyB,aAAa;QACnB0C,WAAW,EAAExC,oBAAoB;QACjCe,SAAS,EAAErC,IAAI,CAACqC,SAAS;QACzB0B,YAAY,EAAE/D,IAAI,CAAC+D,YAAY;QAC/BC,QAAQ,EAAE5D,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAE8C;MAC3B,CAAC;MAED,MAAMe,SAAS,GAAG,MAAMjF,aAAa,CAACkF,YAAY,CAACL,aAAa,CAAC;;MAEjE;MACA,IAAI3D,WAAW,CAACV,MAAM,KAAK,CAAC,EAAE;QAC5B;QACAS,UAAU,CAACuD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAES,SAAS,CAAC,CAAC;MAC1C,CAAC,MAAM;QACL;QACA,MAAME,oBAAoB,GAAGA,CAAC7E,OAAiB,EAAEC,IAAc,EAAE6E,QAAgB,KAAe;UAC9F,IAAI7E,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE,OAAOF,OAAO;UAErC,OAAOA,OAAO,CAACgE,GAAG,CAACC,CAAC,IAAI;YACtB,IAAIA,CAAC,CAAC5D,IAAI,KAAKJ,IAAI,CAAC,CAAC,CAAC,EAAE;cACtB,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;gBACrB,OAAO;kBAAE,GAAG+D,CAAC;kBAAE3D,QAAQ,EAAE,CAAC,IAAI2D,CAAC,CAAC3D,QAAQ,IAAI,EAAE,CAAC,EAAEwE,QAAQ;gBAAE,CAAC;cAC9D;cACA,IAAIb,CAAC,CAAC3D,QAAQ,EAAE;gBACd,OAAO;kBAAE,GAAG2D,CAAC;kBAAE3D,QAAQ,EAAEuE,oBAAoB,CAACZ,CAAC,CAAC3D,QAAQ,EAAEL,IAAI,CAACM,KAAK,CAAC,CAAC,CAAC,EAAEuE,QAAQ;gBAAE,CAAC;cACtF;YACF;YACA,OAAOb,CAAC;UACV,CAAC,CAAC;QACJ,CAAC;QAEDtD,UAAU,CAACuD,IAAI,IAAIW,oBAAoB,CAACX,IAAI,EAAEtD,WAAW,EAAE+D,SAAS,CAAC,CAAC;MACxE;MAEA5C,gBAAgB,CAAC,EAAE,CAAC;MACpBE,uBAAuB,CAAC,EAAE,CAAC;MAC3BZ,gBAAgB,CAAC,KAAK,CAAC;IACzB,CAAC,CAAC,OAAOiC,GAAG,EAAE;MACZC,OAAO,CAACX,KAAK,CAAC,wBAAwB,EAAEU,GAAG,CAAC;MAC5CT,QAAQ,CAAC,yBAAyB,CAAC;IACrC,CAAC,SAAS;MACRF,gBAAgB,CAAC,KAAK,CAAC;IACzB;EACF,CAAC;;EAED;EACA,MAAMoC,gBAAgB,GAAIC,KAA0C,IAAK;IACvE,MAAMC,MAAM,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,KAAK,EAAE,GAAG,EAAE,GAAGC,MAAM,CAACJ,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC;IAC1E1D,eAAe,CAACwD,MAAM,CAAC;IACvBpD,YAAY,CAAC,CAAC,CAAC,CAAC;;IAEhB;IACA,IAAI,OAAOoD,MAAM,KAAK,QAAQ,EAAE;MAC9B,MAAMI,OAAO,GAAGrE,aAAa,CAACsE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAC3B,EAAE,KAAKqB,MAAM,CAAC;MACxD,IAAII,OAAO,EAAE;QACX,MAAMG,WAAW,GAAG,OAAOH,OAAO,CAAChF,IAAI,EAAE;QACzC,MAAMoF,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;QAC5B,MAAMC,WAAW,GAAG,GAAGP,OAAO,CAACQ,IAAI,IAAIJ,SAAS,EAAE;QAElDtD,eAAe,CAACqD,WAAW,CAAC;QAC5BnD,eAAe,CAACuD,WAAW,CAAC;MAC9B;IACF,CAAC,MAAM;MACLzD,eAAe,CAAC,EAAE,CAAC;MACnBE,eAAe,CAAC,EAAE,CAAC;IACrB;EACF,CAAC;EAED,MAAMyD,iBAAiB,GAAGA,CAACC,QAAgB,EAAEZ,KAAU,KAAK;IAC1DtD,YAAY,CAACqC,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAAC6B,QAAQ,GAAGZ;IAAM,CAAC,CAAC,CAAC;EACxD,CAAC;EAED,MAAMa,gBAAgB,GAAIhB,KAA0C,IAAK;IACvE,IAAIA,KAAK,CAACE,MAAM,CAACe,KAAK,IAAIjB,KAAK,CAACE,MAAM,CAACe,KAAK,CAAC,CAAC,CAAC,EAAE;MAC/CtE,aAAa,CAACqD,KAAK,CAACE,MAAM,CAACe,KAAK,CAAC,CAAC,CAAC,CAAC;IACtC;EACF,CAAC;EAED,MAAMC,YAAY,GAAG,MAAOlB,KAAsB,IAAK;IACrDA,KAAK,CAACmB,cAAc,CAAC,CAAC;IACtB,IAAI,CAAC3E,YAAY,IAAI,EAACd,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEqC,SAAS,KAAI,CAACb,YAAY,CAACoC,IAAI,CAAC,CAAC,IAAI,CAAClC,YAAY,CAACkC,IAAI,CAAC,CAAC,EAAE;IAEvF,IAAI;MACF7B,gBAAgB,CAAC,IAAI,CAAC;MACtBI,QAAQ,CAAC,IAAI,CAAC;;MAEd;MACA,IAAIuD,eAAsC,GAAG;QAC3C/F,IAAI,EAAE6B,YAAY;QAClB2D,IAAI,EAAEzD,YAAY;QAClBiE,cAAc,EAAE7E,YAAsB;QACtCuB,SAAS,EAAErC,IAAI,CAACqC,SAAS;QACzB0B,YAAY,EAAE/D,IAAI,CAAC+D,YAAY;QAC/B6B,QAAQ,EAAExF,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAE8C,EAAE;QAC3B2C,WAAW,EAAE3E,SAAS;QACtB4E,MAAM,EAAE;MACV,CAAC;;MAED;MACA,IAAI9E,UAAU,EAAE;QACd0E,eAAe,GAAGzG,eAAe,CAAC8G,wBAAwB,CAACL,eAAe,EAAE1E,UAAU,CAAC;MACzF;MAEA,MAAMgF,WAAW,GAAG,MAAM/G,eAAe,CAACgH,cAAc,CAACP,eAAe,CAAC;;MAEzE;MACA,IAAItF,aAAa,EAAE;QACjBH,UAAU,CAACuD,IAAI,IAAI;UACjB,MAAM0C,qBAAqB,GAAGA,CAAC5G,OAAiB,EAAEC,IAAc,EAAE4G,MAAgB,KAAe;YAC/F,IAAI5G,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE,OAAOF,OAAO;YAErC,OAAOA,OAAO,CAACgE,GAAG,CAACC,CAAC,IAAI;cACtB,IAAIA,CAAC,CAAC5D,IAAI,KAAKJ,IAAI,CAAC,CAAC,CAAC,EAAE;gBACtB,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;kBACrB,OAAO;oBAAE,GAAG+D,CAAC;oBAAE6C,SAAS,EAAE,CAAC,IAAI7C,CAAC,CAAC6C,SAAS,IAAI,EAAE,CAAC,EAAED,MAAM;kBAAE,CAAC;gBAC9D;gBACA,IAAI5C,CAAC,CAAC3D,QAAQ,EAAE;kBACd,OAAO;oBAAE,GAAG2D,CAAC;oBAAE3D,QAAQ,EAAEsG,qBAAqB,CAAC3C,CAAC,CAAC3D,QAAQ,EAAEL,IAAI,CAACM,KAAK,CAAC,CAAC,CAAC,EAAEsG,MAAM;kBAAE,CAAC;gBACrF;cACF;cACA,OAAO5C,CAAC;YACV,CAAC,CAAC;UACJ,CAAC;UAED,OAAO2C,qBAAqB,CAAC1C,IAAI,EAAEtD,WAAW,EAAE8F,WAAW,CAAC;QAC9D,CAAC,CAAC;MACJ;;MAEA;MACAvF,aAAa,CAAC,KAAK,CAAC;MACpBqC,eAAe,CAAC,CAAC;IACnB,CAAC,CAAC,OAAOF,GAAG,EAAE;MACZC,OAAO,CAACX,KAAK,CAAC,2BAA2B,EAAEU,GAAG,CAAC;MAC/CT,QAAQ,CAAC,2BAA2B,CAAC;IACvC,CAAC,SAAS;MACRJ,gBAAgB,CAAC,KAAK,CAAC;IACzB;EACF,CAAC;;EAED;EACA,MAAMsE,aAAa,GAAIC,GAAa,IAAKzF,UAAU,CAACyF,GAAG,CAAC;EACxD,MAAMC,kBAAkB,GAAGA,CAAA,KAAM1F,UAAU,CAAC,IAAI,CAAC;;EAEjD;EACA,MAAM2F,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAItG,WAAW,CAACV,MAAM,KAAK,CAAC,EAAE;MAC5B,OAAO;QAAEF,OAAO;QAAE8G,SAAS,EAAE;MAAG,CAAC;IACnC;IAEA,MAAM1G,MAAM,GAAGL,gBAAgB,CAACC,OAAO,EAAEY,WAAW,CAAC;IACrD,OAAO;MACLZ,OAAO,EAAE,CAAAI,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEE,QAAQ,KAAI,EAAE;MAC/BwG,SAAS,EAAE,CAAA1G,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAE0G,SAAS,KAAI;IAClC,CAAC;EACH,CAAC;EAED,MAAM;IAAE9G,OAAO,EAAEmH,cAAc;IAAEL,SAAS,EAAEM;EAAiB,CAAC,GAAGF,oBAAoB,CAAC,CAAC;EACvF,MAAMG,oBAAoB,GAAGrG,aAAa,CAACsE,IAAI,CAACgC,EAAE,IAAIA,EAAE,CAAC1D,EAAE,KAAKpC,YAAY,CAAC;EAE7E,IAAIc,OAAO,EAAE;IACX,oBACExC,OAAA,CAAC7B,GAAG;MAACsJ,OAAO,EAAC,MAAM;MAACC,cAAc,EAAC,QAAQ;MAACC,UAAU,EAAC,QAAQ;MAACC,SAAS,EAAC,OAAO;MAAApH,QAAA,eAC/ER,OAAA,CAACjB,gBAAgB;QAAA8I,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjB,CAAC;EAEV;EAEA,oBACEhI,OAAA,CAAC7B,GAAG;IAAC8J,KAAK,EAAC,MAAM;IAACC,SAAS,EAAC,YAAY;IAACC,CAAC,EAAE,CAAE;IAAA3H,QAAA,gBAC5CR,OAAA,CAAC5B,UAAU;MAACgK,OAAO,EAAC,IAAI;MAACC,UAAU,EAAE,GAAI;MAACC,EAAE,EAAE,CAAE;MAAA9H,QAAA,EAAC;IAEjD;MAAAqH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAY,CAAC,EAEZlF,KAAK,iBACJ9C,OAAA,CAAClB,KAAK;MAACyJ,QAAQ,EAAC,OAAO;MAACC,EAAE,EAAE;QAAEF,EAAE,EAAE;MAAE,CAAE;MAACG,OAAO,EAAEA,CAAA,KAAM1F,QAAQ,CAAC,IAAI,CAAE;MAAAvC,QAAA,EAClEsC;IAAK;MAAA+E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CACR,eAGDhI,OAAA,CAACxB,WAAW;MAACgK,EAAE,EAAE;QAAEF,EAAE,EAAE;MAAE,CAAE;MAAA9H,QAAA,gBACzBR,OAAA,CAACvB,IAAI;QACHiK,SAAS,EAAC,QAAQ;QAClBN,OAAO,EAAC,OAAO;QACfO,OAAO,EAAEA,CAAA,KAAMtE,UAAU,CAAC,CAAE;QAC5BmE,EAAE,EAAE;UAAEI,KAAK,EAAElJ,MAAM,CAACmJ,OAAO,CAACC;QAAK,CAAE;QAAAtI,QAAA,EACpC;MAED;QAAAqH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,EACNlH,WAAW,CAACoD,GAAG,CAAC,CAAC3D,IAAI,EAAE+D,GAAG,kBACzBtE,OAAA,CAACvB,IAAI;QAEHiK,SAAS,EAAC,QAAQ;QAClBN,OAAO,EAAC,OAAO;QACfO,OAAO,EAAEA,CAAA,KAAMtE,UAAU,CAACC,GAAG,CAAE;QAC/BkE,EAAE,EAAE;UAAEI,KAAK,EAAElJ,MAAM,CAACmJ,OAAO,CAACC;QAAK,CAAE;QAAAtI,QAAA,EAElCD;MAAI,GANA,GAAGA,IAAI,IAAI+D,GAAG,EAAE;QAAAuD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAOjB,CACP,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACS,CAAC,eAGdhI,OAAA,CAAC7B,GAAG;MAACqK,EAAE,EAAE;QAAEf,OAAO,EAAE,MAAM;QAAEsB,GAAG,EAAE,CAAC;QAAErB,cAAc,EAAE,UAAU;QAAEY,EAAE,EAAE;MAAE,CAAE;MAAA9H,QAAA,gBACtER,OAAA,CAAC3B,MAAM;QACL+J,OAAO,EAAC,UAAU;QAClBY,SAAS,eAAEhJ,OAAA,CAACP,aAAa;UAAAoI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAE;QAC7BW,OAAO,EAAEA,CAAA,KAAMpH,gBAAgB,CAAC,IAAI,CAAE;QACtC0H,QAAQ,EAAEzG,OAAQ;QAAAhC,QAAA,EACnB;MAED;QAAAqH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACThI,OAAA,CAAC3B,MAAM;QACL+J,OAAO,EAAC,WAAW;QACnBY,SAAS,eAAEhJ,OAAA,CAACf,OAAO;UAAA4I,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAE;QACvBW,OAAO,EAAEA,CAAA,KAAMtH,aAAa,CAAC,IAAI,CAAE;QACnC4H,QAAQ,EAAEzG,OAAO,IAAItB,aAAa,CAACd,MAAM,KAAK,CAAE;QAChDoI,EAAE,EAAE;UACFU,OAAO,EAAExJ,MAAM,CAACmJ,OAAO,CAACC,IAAI;UAC5B,SAAS,EAAE;YAAEI,OAAO,EAAExJ,MAAM,CAACmJ,OAAO,CAACM;UAAK;QAC5C,CAAE;QAAA3I,QAAA,EACH;MAED;QAAAqH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAGNhI,OAAA,CAAC1B,KAAK;MACJ8K,SAAS,EAAE,CAAE;MACbZ,EAAE,EAAE;QAAEL,CAAC,EAAE,CAAC;QAAEkB,eAAe,EAAE3J,MAAM,CAAC4J,IAAI,CAAC,GAAG,CAAC;QAAEC,YAAY,EAAE;MAAE,CAAE;MAAA/I,QAAA,gBAEjER,OAAA,CAACzB,IAAI;QAACiL,SAAS;QAACC,OAAO,EAAE,CAAE;QAAAjJ,QAAA,GACxB6G,cAAc,CAACnD,GAAG,CAAE5D,MAAM,iBACzBN,OAAA,CAACzB,IAAI;UAACmL,IAAI;UAACC,EAAE,EAAE,EAAG;UAACC,EAAE,EAAE,CAAE;UAACC,EAAE,EAAE,CAAE;UAAArJ,QAAA,eAC9BR,OAAA,CAAC1B,KAAK;YACJ8K,SAAS,EAAE,CAAE;YACbZ,EAAE,EAAE;cACFL,CAAC,EAAE,CAAC;cACJ2B,MAAM,EAAE,SAAS;cACjB,SAAS,EAAE;gBAAET,eAAe,EAAE3J,MAAM,CAAC4J,IAAI,CAAC,GAAG;cAAE;YACjD,CAAE;YACFX,OAAO,EAAEA,CAAA,KAAMhF,iBAAiB,CAACrD,MAAM,CAAE;YAAAE,QAAA,eAEzCR,OAAA,CAAC7B,GAAG;cAACsJ,OAAO,EAAC,MAAM;cAACE,UAAU,EAAC,QAAQ;cAACoB,GAAG,EAAE,CAAE;cAAAvI,QAAA,gBAC7CR,OAAA,CAACX,UAAU;gBAACmJ,EAAE,EAAE;kBAAEI,KAAK,EAAElJ,MAAM,CAACqK,SAAS,CAACjB;gBAAK;cAAE;gBAAAjB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACpDhI,OAAA,CAAC7B,GAAG;gBAAAqC,QAAA,gBACFR,OAAA,CAAC5B,UAAU;kBAAAoC,QAAA,EAAEF,MAAM,CAACC;gBAAI;kBAAAsH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAa,CAAC,EACrC1H,MAAM,CAACoE,WAAW,iBACjB1E,OAAA,CAAC5B,UAAU;kBAACgK,OAAO,EAAC,OAAO;kBAACQ,KAAK,EAAC,gBAAgB;kBAAApI,QAAA,EAC/CF,MAAM,CAACoE;gBAAW;kBAAAmD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CACb;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD;QAAC,GArB4B1H,MAAM,CAACwD,EAAE;UAAA+D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAsBzC,CACP,CAAC,EAEDV,gBAAgB,CAACpD,GAAG,CAAEgD,GAAG,iBACxBlH,OAAA,CAACzB,IAAI;UAACmL,IAAI;UAACC,EAAE,EAAE,EAAG;UAACC,EAAE,EAAE,CAAE;UAACC,EAAE,EAAE,CAAE;UAAArJ,QAAA,eAC9BR,OAAA,CAAC1B,KAAK;YACJ8K,SAAS,EAAE,CAAE;YACbZ,EAAE,EAAE;cACFL,CAAC,EAAE,CAAC;cACJ2B,MAAM,EAAE,SAAS;cACjB,SAAS,EAAE;gBAAET,eAAe,EAAE3J,MAAM,CAAC4J,IAAI,CAAC,GAAG;cAAE;YACjD,CAAE;YACFX,OAAO,EAAEA,CAAA,KAAM1B,aAAa,CAACC,GAAG,CAAE;YAAA1G,QAAA,eAElCR,OAAA,CAAC7B,GAAG;cAACsJ,OAAO,EAAC,MAAM;cAACE,UAAU,EAAC,QAAQ;cAACoB,GAAG,EAAE,CAAE;cAAAvI,QAAA,gBAC7CR,OAAA,CAACT,QAAQ;gBAACiJ,EAAE,EAAE;kBAAEI,KAAK,EAAElJ,MAAM,CAACmJ,OAAO,CAACC;gBAAK;cAAE;gBAAAjB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAChDhI,OAAA,CAAC7B,GAAG;gBAAAqC,QAAA,gBACFR,OAAA,CAAC5B,UAAU;kBAAAoC,QAAA,EAAE0G,GAAG,CAAC3G;gBAAI;kBAAAsH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAa,CAAC,eACnChI,OAAA,CAAC5B,UAAU;kBAACgK,OAAO,EAAC,OAAO;kBAACQ,KAAK,EAAC,gBAAgB;kBAAApI,QAAA,EAC/C0G,GAAG,CAAC8C;gBAAgB;kBAAAnC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACX,CAAC,EACZd,GAAG,CAAC+C,QAAQ,iBACXjK,OAAA,CAAC5B,UAAU;kBAACgK,OAAO,EAAC,SAAS;kBAACQ,KAAK,EAAC,gBAAgB;kBAAApI,QAAA,GACjD,CAAC0G,GAAG,CAAC+C,QAAQ,GAAG,IAAI,GAAG,IAAI,EAAEC,OAAO,CAAC,CAAC,CAAC,EAAC,KAC3C;gBAAA;kBAAArC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CACb;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD;QAAC,GAxB4Bd,GAAG,CAACpD,EAAE;UAAA+D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAyBtC,CACP,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EAENX,cAAc,CAACjH,MAAM,KAAK,CAAC,IAAIkH,gBAAgB,CAAClH,MAAM,KAAK,CAAC,iBAC3DJ,OAAA,CAAC7B,GAAG;QAACgM,SAAS,EAAC,QAAQ;QAACC,EAAE,EAAE,CAAE;QAAA5J,QAAA,eAC5BR,OAAA,CAAC5B,UAAU;UAACwK,KAAK,EAAC,gBAAgB;UAAApI,QAAA,EAAC;QAEnC;UAAAqH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC,eAGRhI,OAAA,CAACtB,KAAK;MACJ2L,IAAI,EAAE/I,aAAc;MACpBmH,OAAO,EAAEA,CAAA,KAAMlH,gBAAgB,CAAC,KAAK,CAAE;MACvC,mBAAgB,kBAAkB;MAAAf,QAAA,eAElCR,OAAA,CAAC7B,GAAG;QACFqK,EAAE,EAAE;UACF8B,QAAQ,EAAE,UAAU;UACpBC,GAAG,EAAE,KAAK;UACVC,IAAI,EAAE,KAAK;UACXC,SAAS,EAAE,uBAAuB;UAClCxC,KAAK,EAAE,GAAG;UACViB,OAAO,EAAE,kBAAkB;UAC3BwB,SAAS,EAAE,EAAE;UACbvC,CAAC,EAAE,CAAC;UACJoB,YAAY,EAAE;QAChB,CAAE;QAAA/I,QAAA,gBAEFR,OAAA,CAAC7B,GAAG;UACFqK,EAAE,EAAE;YACFf,OAAO,EAAE,MAAM;YACfC,cAAc,EAAE,eAAe;YAC/BC,UAAU,EAAE,QAAQ;YACpBW,EAAE,EAAE;UACN,CAAE;UAAA9H,QAAA,gBAEFR,OAAA,CAAC5B,UAAU;YAACgK,OAAO,EAAC,IAAI;YAACM,SAAS,EAAC,IAAI;YAAAlI,QAAA,EAAC;UAExC;YAAAqH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACbhI,OAAA,CAACnB,UAAU;YAAC8J,OAAO,EAAEA,CAAA,KAAMpH,gBAAgB,CAAC,KAAK,CAAE;YAACoJ,IAAI,EAAC,OAAO;YAAAnK,QAAA,eAC9DR,OAAA,CAACb,SAAS;cAAA0I,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eAENhI,OAAA,CAACrB,SAAS;UACRiM,SAAS;UACTC,KAAK,EAAC,aAAa;UACnBxF,KAAK,EAAErD,aAAc;UACrB8I,QAAQ,EAAGC,CAAC,IAAK9I,gBAAgB,CAAC8I,CAAC,CAAC3F,MAAM,CAACC,KAAK,CAAE;UAClD2F,MAAM,EAAC,QAAQ;UACfC,QAAQ;UACRnI,KAAK,EAAE,CAACd,aAAa,CAACwC,IAAI,CAAC,CAAC,IAAIxC,aAAa,CAAC5B,MAAM,GAAG,CAAE;UACzD8K,UAAU,EAAE,CAAClJ,aAAa,CAACwC,IAAI,CAAC,CAAC,IAAIxC,aAAa,CAAC5B,MAAM,GAAG,CAAC,GAAG,yBAAyB,GAAG;QAAG;UAAAyH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChG,CAAC,eAEFhI,OAAA,CAACrB,SAAS;UACRiM,SAAS;UACTC,KAAK,EAAC,wBAAwB;UAC9BxF,KAAK,EAAEnD,oBAAqB;UAC5B4I,QAAQ,EAAGC,CAAC,IAAK5I,uBAAuB,CAAC4I,CAAC,CAAC3F,MAAM,CAACC,KAAK,CAAE;UACzD2F,MAAM,EAAC,QAAQ;UACfG,SAAS;UACTC,IAAI,EAAE;QAAE;UAAAvD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC,eAEFhI,OAAA,CAAC7B,GAAG;UAACqK,EAAE,EAAE;YAAEf,OAAO,EAAE,MAAM;YAAEsB,GAAG,EAAE,CAAC;YAAEsC,EAAE,EAAE;UAAE,CAAE;UAAA7K,QAAA,gBAC1CR,OAAA,CAAC3B,MAAM;YACL+J,OAAO,EAAC,UAAU;YAClBO,OAAO,EAAEA,CAAA,KAAMpH,gBAAgB,CAAC,KAAK,CAAE;YACvCqJ,SAAS;YAAApK,QAAA,EACV;UAED;YAAAqH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACThI,OAAA,CAAC3B,MAAM;YACL+J,OAAO,EAAC,WAAW;YACnBO,OAAO,EAAEpE,kBAAmB;YAC5B0E,QAAQ,EAAE,CAACjH,aAAa,CAACwC,IAAI,CAAC,CAAC,IAAI5B,aAAc;YACjDgI,SAAS;YACTpC,EAAE,EAAE;cACFU,OAAO,EAAExJ,MAAM,CAACmJ,OAAO,CAACC,IAAI;cAC5B,SAAS,EAAE;gBAAEI,OAAO,EAAExJ,MAAM,CAACmJ,OAAO,CAACM;cAAK;YAC5C,CAAE;YAAA3I,QAAA,EAEDoC,aAAa,gBAAG5C,OAAA,CAACjB,gBAAgB;cAAC4L,IAAI,EAAE;YAAG;cAAA9C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,GAAG;UAAQ;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,eAGRhI,OAAA,CAACtB,KAAK;MACJ2L,IAAI,EAAEjJ,UAAW;MACjBqH,OAAO,EAAEA,CAAA,KAAM;QACbpH,aAAa,CAAC,KAAK,CAAC;QACpBqC,eAAe,CAAC,CAAC;MACnB,CAAE;MACF,mBAAgB,uBAAuB;MAAAlD,QAAA,eAEvCR,OAAA,CAAC7B,GAAG;QACFqK,EAAE,EAAE;UACF8B,QAAQ,EAAE,UAAU;UACpBC,GAAG,EAAE,KAAK;UACVC,IAAI,EAAE,KAAK;UACXC,SAAS,EAAE,uBAAuB;UAClCxC,KAAK,EAAE,GAAG;UACViB,OAAO,EAAE,kBAAkB;UAC3BwB,SAAS,EAAE,EAAE;UACbvC,CAAC,EAAE,CAAC;UACJoB,YAAY,EAAE,CAAC;UACf+B,SAAS,EAAE,MAAM;UACjBC,QAAQ,EAAE;QACZ,CAAE;QAAA/K,QAAA,gBAEFR,OAAA,CAAC7B,GAAG;UACFqK,EAAE,EAAE;YACFf,OAAO,EAAE,MAAM;YACfC,cAAc,EAAE,eAAe;YAC/BC,UAAU,EAAE,QAAQ;YACpBW,EAAE,EAAE;UACN,CAAE;UAAA9H,QAAA,gBAEFR,OAAA,CAAC5B,UAAU;YAACgK,OAAO,EAAC,IAAI;YAACM,SAAS,EAAC,IAAI;YAAAlI,QAAA,EAAC;UAExC;YAAAqH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACbhI,OAAA,CAACnB,UAAU;YACT8J,OAAO,EAAEA,CAAA,KAAM;cACbtH,aAAa,CAAC,KAAK,CAAC;cACpBqC,eAAe,CAAC,CAAC;YACnB,CAAE;YACFiH,IAAI,EAAC,OAAO;YAAAnK,QAAA,eAEZR,OAAA,CAACb,SAAS;cAAA0I,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eAENhI,OAAA;UAAMwL,QAAQ,EAAEpF,YAAa;UAAA5F,QAAA,gBAC3BR,OAAA,CAACrB,SAAS;YACRiM,SAAS;YACTC,KAAK,EAAC,eAAe;YACrBxF,KAAK,EAAEjD,YAAa;YACpB0I,QAAQ,EAAGC,CAAC,IAAK1I,eAAe,CAAC0I,CAAC,CAAC3F,MAAM,CAACC,KAAK,CAAE;YACjD2F,MAAM,EAAC,QAAQ;YACfC,QAAQ;YACRnI,KAAK,EAAE,CAACV,YAAY,CAACoC,IAAI,CAAC,CAAC,IAAIpC,YAAY,CAAChC,MAAM,GAAG,CAAE;YACvD8K,UAAU,EAAE,CAAC9I,YAAY,CAACoC,IAAI,CAAC,CAAC,IAAIpC,YAAY,CAAChC,MAAM,GAAG,CAAC,GAAG,2BAA2B,GAAG;UAAG;YAAAyH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChG,CAAC,eAEFhI,OAAA,CAACrB,SAAS;YACRiM,SAAS;YACTC,KAAK,EAAC,eAAe;YACrBxF,KAAK,EAAE/C,YAAa;YACpBwI,QAAQ,EAAGC,CAAC,IAAKxI,eAAe,CAACwI,CAAC,CAAC3F,MAAM,CAACC,KAAK,CAAE;YACjD2F,MAAM,EAAC,QAAQ;YACfC,QAAQ;YACRnI,KAAK,EAAE,CAACR,YAAY,CAACkC,IAAI,CAAC,CAAC,IAAIlC,YAAY,CAAClC,MAAM,GAAG,CAAE;YACvD8K,UAAU,EAAE,CAAC5I,YAAY,CAACkC,IAAI,CAAC,CAAC,IAAIlC,YAAY,CAAClC,MAAM,GAAG,CAAC,GAAG,2BAA2B,GAAG;UAAG;YAAAyH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChG,CAAC,eAEFhI,OAAA,CAACrB,SAAS;YACR8M,MAAM;YACNb,SAAS;YACTC,KAAK,EAAC,eAAe;YACrBxF,KAAK,EAAE3D,YAAa;YACpBoJ,QAAQ,EAAE7F,gBAAiB;YAC3B+F,MAAM,EAAC,QAAQ;YACfC,QAAQ;YACRnI,KAAK,EAAE,CAACpB,YAAa;YACrBwJ,UAAU,EAAE,CAACxJ,YAAY,GAAG,+BAA+B,GAAG,EAAG;YAAAlB,QAAA,EAEhEU,aAAa,CAACgD,GAAG,CAAEwH,IAAI,iBACtB1L,OAAA,CAACpB,QAAQ;cAAeyG,KAAK,EAAEqG,IAAI,CAAC5H,EAAG;cAAAtD,QAAA,EACpCkL,IAAI,CAACnL;YAAI,GADGmL,IAAI,CAAC5H,EAAE;cAAA+D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEZ,CACX;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACO,CAAC,EAGXT,oBAAoB,IAAIA,oBAAoB,CAACoE,MAAM,CAACzH,GAAG,CAAE0H,KAAK;YAAA,IAAAC,cAAA;YAAA,oBAC7D7L,OAAA,CAACrB,SAAS;cAERkM,KAAK,EAAEe,KAAK,CAACrL,IAAI,IAAIqL,KAAK,CAACX,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAE;cACjDL,SAAS;cACTI,MAAM,EAAC,QAAQ;cACfU,IAAI,EAAEE,KAAK,CAACE,SAAS,KAAK,QAAQ,GAAG,QAAQ,GACvCF,KAAK,CAACE,SAAS,KAAK,MAAM,GAAG,MAAM,GACnCF,KAAK,CAACE,SAAS,KAAK,OAAO,GAAG,OAAO,GAAG,MAAO;cACrDX,SAAS,EAAES,KAAK,CAACE,SAAS,KAAK,UAAW;cAC1CV,IAAI,EAAEQ,KAAK,CAACE,SAAS,KAAK,UAAU,GAAG,CAAC,GAAG,CAAE;cAC7CL,MAAM,EAAEG,KAAK,CAACE,SAAS,KAAK,QAAS;cACrCzG,KAAK,EAAEvD,SAAS,CAAC8J,KAAK,CAAC3F,QAAQ,CAAC,IAAI2F,KAAK,CAACG,YAAY,IAAI,EAAG;cAC7DjB,QAAQ,EAAGC,CAAC,IAAK/E,iBAAiB,CAAC4F,KAAK,CAAC3F,QAAQ,EAAE8E,CAAC,CAAC3F,MAAM,CAACC,KAAK,CAAE;cACnE4F,QAAQ,EAAEW,KAAK,CAACX,QAAS;cACzBC,UAAU,EAAEU,KAAK,CAAClH,WAAY;cAC9BsH,eAAe,EAAEJ,KAAK,CAACE,SAAS,KAAK,MAAM,GAAG;gBAAEG,MAAM,EAAE;cAAK,CAAC,GAAG5L,SAAU;cAAAG,QAAA,EAE1EoL,KAAK,CAACE,SAAS,KAAK,QAAQ,MAAAD,cAAA,GAAID,KAAK,CAACM,OAAO,cAAAL,cAAA,uBAAbA,cAAA,CAAe3H,GAAG,CAAEiI,MAAM,iBACzDnM,OAAA,CAACpB,QAAQ;gBAAcyG,KAAK,EAAE8G,MAAO;gBAAA3L,QAAA,EAClC2L;cAAM,GADMA,MAAM;gBAAAtE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAEX,CACX,CAAC;YAAA,GApBG4D,KAAK,CAAC3F,QAAQ;cAAA4B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAqBV,CAAC;UAAA,CACb,CAAC,eAEFhI,OAAA;YACEoM,MAAM,EAAC,KAAK;YACZC,KAAK,EAAE;cAAE5E,OAAO,EAAE;YAAO,CAAE;YAC3B3D,EAAE,EAAC,kBAAkB;YACrB4H,IAAI,EAAC,MAAM;YACXZ,QAAQ,EAAE5E;UAAiB;YAAA2B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC,eACFhI,OAAA;YAAOsM,OAAO,EAAC,kBAAkB;YAAA9L,QAAA,eAC/BR,OAAA,CAAC3B,MAAM;cACL+J,OAAO,EAAC,UAAU;cAClBM,SAAS,EAAC,MAAM;cAChBkC,SAAS;cACTpC,EAAE,EAAE;gBAAE6C,EAAE,EAAE;cAAE,CAAE;cAAA7K,QAAA,EAEboB,UAAU,GAAG,aAAaA,UAAU,CAACrB,IAAI,EAAE,GAAG;YAAwB;cAAAsH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,EAEPpG,UAAU,iBACT5B,OAAA,CAAC7B,GAAG;YAACqK,EAAE,EAAE;cAAE6C,EAAE,EAAE;YAAE,CAAE;YAAA7K,QAAA,eACjBR,OAAA,CAAC5B,UAAU;cAACgK,OAAO,EAAC,OAAO;cAACQ,KAAK,EAAC,gBAAgB;cAAApI,QAAA,GAAC,QAC3C,EAACoB,UAAU,CAACrB,IAAI,EAAC,IAAE,EAAC,CAACqB,UAAU,CAAC+I,IAAI,GAAG,IAAI,GAAG,IAAI,EAAET,OAAO,CAAC,CAAC,CAAC,EAAC,MACvE;YAAA;cAAArC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CACN,eAEDhI,OAAA,CAAC7B,GAAG;YAACqK,EAAE,EAAE;cAAEf,OAAO,EAAE,MAAM;cAAEsB,GAAG,EAAE,CAAC;cAAEsC,EAAE,EAAE;YAAE,CAAE;YAAA7K,QAAA,gBAC1CR,OAAA,CAAC3B,MAAM;cACL+J,OAAO,EAAC,UAAU;cAClBO,OAAO,EAAEA,CAAA,KAAM;gBACbtH,aAAa,CAAC,KAAK,CAAC;gBACpBqC,eAAe,CAAC,CAAC;cACnB,CAAE;cACFkH,SAAS;cAAApK,QAAA,EACV;YAED;cAAAqH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACThI,OAAA,CAAC3B,MAAM;cACLqN,IAAI,EAAC,QAAQ;cACbtD,OAAO,EAAC,WAAW;cACnBa,QAAQ,EAAE,CAACvH,YAAY,IAAI,CAACU,YAAY,CAACoC,IAAI,CAAC,CAAC,IAAI,CAAClC,YAAY,CAACkC,IAAI,CAAC,CAAC,IAAI9B,aAAc;cACzFkI,SAAS;cACTpC,EAAE,EAAE;gBACFU,OAAO,EAAExJ,MAAM,CAACmJ,OAAO,CAACC,IAAI;gBAC5B,SAAS,EAAE;kBAAEI,OAAO,EAAExJ,MAAM,CAACmJ,OAAO,CAACM;gBAAK;cAC5C,CAAE;cAAA3I,QAAA,EAEDkC,aAAa,gBAAG1C,OAAA,CAACjB,gBAAgB;gBAAC4L,IAAI,EAAE;cAAG;gBAAA9C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,GAAG;YAAQ;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,eAGRhI,OAAA,CAACtB,KAAK;MACJ2L,IAAI,EAAE,CAAC,CAAC7I,OAAQ;MAChBiH,OAAO,EAAEtB,kBAAmB;MAC5B,mBAAgB,qBAAqB;MAAA3G,QAAA,eAErCR,OAAA,CAAC7B,GAAG;QACFqK,EAAE,EAAE;UACF8B,QAAQ,EAAE,UAAU;UACpBC,GAAG,EAAE,KAAK;UACVC,IAAI,EAAE,KAAK;UACXC,SAAS,EAAE,uBAAuB;UAClCxC,KAAK,EAAE,GAAG;UACViB,OAAO,EAAE,kBAAkB;UAC3BwB,SAAS,EAAE,EAAE;UACbvC,CAAC,EAAE,CAAC;UACJoB,YAAY,EAAE,CAAC;UACf+B,SAAS,EAAE,MAAM;UACjBC,QAAQ,EAAE;QACZ,CAAE;QAAA/K,QAAA,gBAEFR,OAAA,CAAC7B,GAAG;UACFqK,EAAE,EAAE;YACFf,OAAO,EAAE,MAAM;YACfC,cAAc,EAAE,eAAe;YAC/BC,UAAU,EAAE,QAAQ;YACpBW,EAAE,EAAE;UACN,CAAE;UAAA9H,QAAA,gBAEFR,OAAA,CAAC5B,UAAU;YAACgK,OAAO,EAAC,IAAI;YAACM,SAAS,EAAC,IAAI;YAAAlI,QAAA,EACpCgB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEjB;UAAI;YAAAsH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACbhI,OAAA,CAACnB,UAAU;YAAC8J,OAAO,EAAExB,kBAAmB;YAACwD,IAAI,EAAC,OAAO;YAAAnK,QAAA,eACnDR,OAAA,CAACb,SAAS;cAAA0I,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,EAELxG,OAAO,iBACNxB,OAAA,CAAC7B,GAAG;UAAAqC,QAAA,gBACFR,OAAA,CAAC5B,UAAU;YAACgK,OAAO,EAAC,WAAW;YAACI,EAAE,EAAE;cAAEF,EAAE,EAAE;YAAE,CAAE;YAAA9H,QAAA,gBAC5CR,OAAA;cAAAQ,QAAA,EAAQ;YAAc;cAAAqH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACxG,OAAO,CAACwI,gBAAgB;UAAA;YAAAnC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/C,CAAC,EAEZxG,OAAO,CAAC+K,QAAQ,IAAIC,MAAM,CAACC,OAAO,CAACjL,OAAO,CAAC+K,QAAQ,CAAC,CAACrI,GAAG,CAAC,CAAC,CAACwI,GAAG,EAAErH,KAAK,CAAC,kBACrErF,OAAA,CAAC5B,UAAU;YAAWgK,OAAO,EAAC,OAAO;YAACI,EAAE,EAAE;cAAEF,EAAE,EAAE;YAAE,CAAE;YAAA9H,QAAA,gBAClDR,OAAA;cAAAQ,QAAA,GAASkM,GAAG,EAAC,GAAC;YAAA;cAAA7E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAAC3C,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEsH,QAAQ,CAAC,CAAC;UAAA,GAD3BD,GAAG;YAAA7E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAER,CACb,CAAC,eAEFhI,OAAA,CAAC7B,GAAG;YAACqK,EAAE,EAAE;cAAE6C,EAAE,EAAE,CAAC;cAAEuB,EAAE,EAAE,CAAC;cAAEC,SAAS,EAAE,CAAC;cAAEC,WAAW,EAAE;YAAU,CAAE;YAAAtM,QAAA,gBAC9DR,OAAA,CAAC5B,UAAU;cAACgK,OAAO,EAAC,OAAO;cAACI,EAAE,EAAE;gBAAEF,EAAE,EAAE;cAAE,CAAE;cAAA9H,QAAA,gBACxCR,OAAA;gBAAAQ,QAAA,EAAQ;cAAK;gBAAAqH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACxG,OAAO,CAACuL,QAAQ,IAAI,kBAAkB;YAAA;cAAAlF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpD,CAAC,EACZxG,OAAO,CAACyI,QAAQ,iBACfjK,OAAA,CAAC5B,UAAU;cAACgK,OAAO,EAAC,OAAO;cAACI,EAAE,EAAE;gBAAEF,EAAE,EAAE;cAAE,CAAE;cAAA9H,QAAA,gBACxCR,OAAA;gBAAAQ,QAAA,EAAQ;cAAK;gBAAAqH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAAC,CAACxG,OAAO,CAACyI,QAAQ,GAAG,IAAI,GAAG,IAAI,EAAEC,OAAO,CAAC,CAAC,CAAC,EAAC,KACtE;YAAA;cAAArC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CACb,eACDhI,OAAA,CAAC5B,UAAU;cAACgK,OAAO,EAAC,OAAO;cAACI,EAAE,EAAE;gBAAEF,EAAE,EAAE;cAAE,CAAE;cAAA9H,QAAA,gBACxCR,OAAA;gBAAAQ,QAAA,EAAQ;cAAO;gBAAAqH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACxG,OAAO,CAACkF,MAAM;YAAA;cAAAmB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9B,CAAC,eACbhI,OAAA,CAAC5B,UAAU;cAACgK,OAAO,EAAC,OAAO;cAACI,EAAE,EAAE;gBAAEF,EAAE,EAAE;cAAE,CAAE;cAAA9H,QAAA,gBACxCR,OAAA;gBAAAQ,QAAA,EAAQ;cAAQ;gBAAAqH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACxG,OAAO,CAACwL,SAAS,GAAG,IAAIpH,IAAI,CAACpE,OAAO,CAACwL,SAAS,CAAC,CAACC,cAAc,CAAC,CAAC,GAAG,SAAS;YAAA;cAAApF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7F,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEV,CAAC;AAACrH,EAAA,CAruBID,YAAsB;EAAA,QACTf,OAAO;AAAA;AAAAuN,EAAA,GADpBxM,YAAsB;AAuuB5B,eAAeA,YAAY;AAAC,IAAAwM,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}