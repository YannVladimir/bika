{"ast":null,"code":"import React from\"react\";import{AppBar,Toolbar,IconButton,Typography,Box,Avatar,Menu,MenuItem,styled}from\"@mui/material\";import{Brightness4 as DarkIcon,Brightness7 as LightIcon,NotificationsOutlined as NotificationsIcon,KeyboardArrowDown as ArrowDownIcon,Menu as MenuIcon}from\"@mui/icons-material\";import{useThemeContext}from\"../../theme/ThemeProvider\";import{useNavigate}from\"react-router-dom\";import{useAuth}from\"../../context/AuthContext\";import{getRoleDisplayName}from\"../../utils/roleUtils\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StyledAppBar=styled(AppBar)(_ref=>{let{theme}=_ref;return{backgroundColor:theme.palette.background.paper,color:theme.palette.text.primary,boxShadow:\"none\",borderBottom:\"1px solid \".concat(theme.palette.divider),zIndex:theme.zIndex.drawer+1};});const UserProfile=styled(Box)({display:\"flex\",alignItems:\"center\",gap:\"8px\",cursor:\"pointer\",padding:\"4px 8px\",borderRadius:\"8px\",\"&:hover\":{backgroundColor:\"rgba(0, 0, 0, 0.04)\"}});const Topbar=_ref2=>{let{onSidebarToggle}=_ref2;const{mode,toggleTheme}=useThemeContext();const{user,logout}=useAuth();const[anchorEl,setAnchorEl]=React.useState(null);const navigate=useNavigate();const handleProfileClick=event=>{setAnchorEl(event.currentTarget);};const handleClose=()=>{setAnchorEl(null);};const handleProfile=()=>{handleClose();navigate(\"/profile\");};const handleLogout=async()=>{handleClose();try{await logout();navigate(\"/login\");}catch(error){console.error(\"Logout failed:\",error);}};// Get user initials\nconst getUserInitials=()=>{if(!user)return\"U\";const firstInitial=user.firstName?user.firstName.charAt(0).toUpperCase():\"\";const lastInitial=user.lastName?user.lastName.charAt(0).toUpperCase():\"\";return\"\".concat(firstInitial).concat(lastInitial)||user.email.charAt(0).toUpperCase();};// Get user display name\nconst getUserDisplayName=()=>{if(!user)return\"User\";return\"\".concat(user.firstName||\"\",\" \").concat(user.lastName||\"\").trim()||user.email;};return/*#__PURE__*/_jsx(StyledAppBar,{position:\"fixed\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",edge:\"start\",onClick:onSidebarToggle,sx:{mr:2,display:{xs:\"inline-flex\",md:\"inline-flex\"}},children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1}}),/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",onClick:toggleTheme,sx:{mr:2},children:mode===\"dark\"?/*#__PURE__*/_jsx(LightIcon,{}):/*#__PURE__*/_jsx(DarkIcon,{})}),/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",sx:{mr:2},children:/*#__PURE__*/_jsx(NotificationsIcon,{})}),/*#__PURE__*/_jsxs(UserProfile,{onClick:handleProfileClick,children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:32,height:32,backgroundColor:\"primary.main\"},children:getUserInitials()}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:500,children:getUserDisplayName()}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:getRoleDisplayName(user===null||user===void 0?void 0:user.role)})]}),/*#__PURE__*/_jsx(ArrowDownIcon,{sx:{fontSize:20}})]}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleClose,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},children:[/*#__PURE__*/_jsx(MenuItem,{onClick:handleProfile,children:\"Profile\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleLogout,children:\"Logout\"})]})]})});};export default Topbar;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}