{"ast":null,"code":"import _objectSpread from\"C:/Users/Yann/Desktop/biakasystem/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{Box,Card,TextField,Button,Typography,Link,styled,IconButton,InputAdornment,Alert,CircularProgress}from\"@mui/material\";import{Visibility,VisibilityOff}from\"@mui/icons-material\";import{tokens}from\"../../theme/theme\";import{useAuth,useIsAuthenticated}from\"../../context/AuthContext\";import{useNotification}from\"../../context/NotificationContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginRoot=styled(Box)({minHeight:\"100vh\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",padding:\"20px\",background:\"linear-gradient(135deg, \\n    \".concat(tokens.primary.main,\" 0%, \\n    \").concat(tokens.primary.light,\" 50%,\\n    \").concat(tokens.secondary.main,\" 100%)\")});const LoginCard=styled(Card)(_ref=>{let{theme}=_ref;return{padding:theme.spacing(4),width:\"100%\",maxWidth:400,borderRadius:16,boxShadow:\"0 8px 32px rgba(0, 0, 0, 0.1)\"};});const Logo=styled(\"img\")({width:120,height:\"auto\",marginBottom:32});const Form=styled(\"form\")({display:\"flex\",flexDirection:\"column\",gap:24});const ForgotPassword=styled(Link)({textAlign:\"right\",textDecoration:\"none\",marginTop:-16,marginBottom:16,\"&:hover\":{textDecoration:\"underline\"}});const Login=()=>{var _location$state,_location$state$from;const[showPassword,setShowPassword]=useState(false);const[formData,setFormData]=useState({username:\"\",password:\"\"});const[formErrors,setFormErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const{state,login,clearError}=useAuth();const isAuthenticated=useIsAuthenticated();const{showError,showSuccess,showInfo}=useNotification();const navigate=useNavigate();const location=useLocation();// Get the return URL or default to dashboard\nconst from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/dashboard\";// Redirect if already authenticated\nuseEffect(()=>{if(isAuthenticated){navigate(from,{replace:true});}},[isAuthenticated,navigate,from]);// Clear auth errors when component mounts\nuseEffect(()=>{clearError();},[clearError]);// Handle input changes\nconst handleChange=field=>event=>{const value=event.target.value;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));// Clear field error when user starts typing\nif(formErrors[field]){setFormErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:\"\"}));}};// Validate form\nconst validateForm=()=>{const errors={};if(!formData.username.trim()){errors.username=\"Username or email is required\";}else if(formData.username.length<3){errors.username=\"Username must be at least 3 characters\";}if(!formData.password){errors.password=\"Password is required\";}else if(formData.password.length<6){errors.password=\"Password must be at least 6 characters\";}setFormErrors(errors);return Object.keys(errors).length===0;};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setIsSubmitting(true);try{await login(formData);showSuccess(\"Login successful! Redirecting...\");// Navigation will happen automatically via useEffect\n}catch(error){console.error(\"Login error:\",error);showError((error===null||error===void 0?void 0:error.message)||\"Login failed. Please check your credentials.\");}finally{setIsSubmitting(false);}};// Handle forgot password\nconst handleForgotPassword=e=>{e.preventDefault();// TODO: Implement forgot password functionality\nshowInfo(\"Forgot password functionality will be implemented soon.\");};return/*#__PURE__*/_jsx(LoginRoot,{children:/*#__PURE__*/_jsxs(LoginCard,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Logo,{src:\"/logo.svg\",alt:\"Bika Logo\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",fontWeight:600,mb:3,children:\"Welcome back\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",mb:4,children:\"Enter your credentials to access your account\"})]}),state.error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:state.error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Username or Email\",variant:\"outlined\",value:formData.username,onChange:handleChange(\"username\"),error:!!formErrors.username,helperText:formErrors.username,disabled:isSubmitting||state.isLoading,autoComplete:\"username\",autoFocus:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Password\",variant:\"outlined\",type:showPassword?\"text\":\"password\",value:formData.password,onChange:handleChange(\"password\"),error:!!formErrors.password,helperText:formErrors.password,disabled:isSubmitting||state.isLoading,autoComplete:\"current-password\",InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowPassword(!showPassword),edge:\"end\",disabled:isSubmitting||state.isLoading,children:showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})}}),/*#__PURE__*/_jsx(ForgotPassword,{href:\"#\",variant:\"body2\",color:\"primary\",onClick:handleForgotPassword,children:\"Forgot password?\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",size:\"large\",fullWidth:true,disabled:isSubmitting||state.isLoading,sx:{height:48,background:\"linear-gradient(90deg, \".concat(tokens.primary.main,\", \").concat(tokens.secondary.main,\")\"),\"&:hover\":{background:\"linear-gradient(90deg, \".concat(tokens.primary.dark,\", \").concat(tokens.secondary.dark,\")\")},\"&:disabled\":{background:\"rgba(0, 0, 0, 0.12)\"}},children:isSubmitting||state.isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:24,color:\"inherit\"}):\"Sign in\"})]}),/*#__PURE__*/_jsx(Box,{mt:3,textAlign:\"center\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Don't have an account?\",\" \",/*#__PURE__*/_jsx(Link,{href:\"#\",color:\"primary\",onClick:e=>{e.preventDefault();// TODO: Navigate to registration page or implement registration\nshowInfo(\"Registration functionality will be implemented soon.\");},children:\"Contact your administrator\"})]})})]})});};export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}